/* This is file is part of ev3php
   This is ev3c <https://github.com/theZiz/ev3c>
   I have applied a fix and removed a few things, but mostly it's the same as the original.
*/
 /* This file is part of ev3c.
  * Ev3c is free software: you can redistribute it and/or modify
  * it under the terms of the GNU General Public License as published by
  * the Free Software Foundation, either version 2 of the License, or
  * (at your option) any later version.
  *
  * Ev3c is distributed in the hope that it will be useful,
  * but WITHOUT ANY WARRANTY; without even the implied warranty of
  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  * GNU General Public License for more details.
  *
  * You should have received a copy of the GNU General Public License
  * along with ev3c.  If not, see <http://www.gnu.org/licenses/>
  *
  * For feedback and questions about my Files and Projects please mail me,
  * Alexander Matthes (Ziz) , ziz_at_mailbox.org, http://github.com/theZiz */
#include "linux/kd.h"
#include <linux/fb.h>
#include <sys/mman.h>
#include <sys/ioctl.h>
#include <linux/input.h>
#include <stdint.h>
#include <dirent.h>
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <string.h>
#define EV3_STRING_LENGTH 64
#define EV3_X_LCD 178
#define EV3_Y_LCD 128
#define EV3_S_LCD 712
#define EV3_BPP_LCD 32
#define EV3_SY_LCD (EV3_Y_LCD * EV3_S_LCD)
#define large_font_width 256
#define large_font_height 96
#define LARGE_FONT_PIXEL(x, y) ((large_font_bits[((x) >> 3) + (y) * 32 ] & (1 << ((x) & 7))) >> ((x) & 7))
#define LARGE_LETTER_WIDTH 16
#define LARGE_LETTER_HEIGHT 16
#define normal_font_width 128
#define normal_font_height 54
#define NORMAL_FONT_PIXEL(x, y) ((normal_font_bits[((x) >> 3) + (y) * 16 ] & (1 << ((x) & 7))) >> ((x) & 7))
#define NORMAL_LETTER_WIDTH 8
#define NORMAL_LETTER_HEIGHT 9
#define small_font_width 128
#define small_font_height 48
#define SMALL_FONT_PIXEL(x, y) ((small_font_bits[((x) >> 3) + (y) * 16 ] & (1 << ((x) & 7))) >> ((x) & 7))
#define SMALL_LETTER_WIDTH 8
#define SMALL_LETTER_HEIGHT 8
#define tiny_font_width 125
#define tiny_font_height 42
#define TINY_FONT_PIXEL(x, y) ((tiny_font_bits[((x) >> 3) + (y) * 16 ] & (1 << ((x) & 7))) >> ((x) & 7))
#define TINY_LETTER_WIDTH 5
#define TINY_FONT_WIDTH 8
#define TINY_LETTER_HEIGHT 7
#define EV3_PIXEL_SET(x, y) __fbp[ (x) + (y) * (EV3_S_LCD/(EV3_BPP_LCD/8))] = 0x00000000
#define EV3_PIXEL_UNSET(x, y) __fbp[ (x) + (y) * (EV3_S_LCD/(EV3_BPP_LCD/8))] = 0xffffffff
#define EV3_PIXEL(x, y, bit) {if (bit) EV3_PIXEL_SET(x, y); else EV3_PIXEL_UNSET(x, y);}
#define MIRROR_PIXEL_SET(a, b) { \
	if (y+b >= 0 && y+b < EV3_Y_LCD) { \
		if (x+a >= 0 && x+a < EV3_X_LCD) \
			EV3_PIXEL_SET(x+a, y+b); \
		if (x-a >= 0 && x-a < EV3_X_LCD) \
			EV3_PIXEL_SET(x-a, y+b); \
	} \
	if (y-b >= 0 && y-b < EV3_Y_LCD) { \
		if (x+a >= 0 && x+a < EV3_X_LCD) \
			EV3_PIXEL_SET(x+a, y-b); \
		if (x-a >= 0 && x-a < EV3_X_LCD) \
			EV3_PIXEL_SET(x-a, y-b); \
	} \
}
#define MIRROR_PIXEL_UNSET(a, b) { \
	if (y+b >= 0 && y+b < EV3_Y_LCD) { \
		if (x+a >= 0 && x+a < EV3_X_LCD) \
			EV3_PIXEL_UNSET(x+a, y+b); \
		if (x-a >= 0 && x-a < EV3_X_LCD) \
			EV3_PIXEL_UNSET(x-a, y+b); \
	} \
	if (y-b >= 0 && y-b < EV3_Y_LCD) { \
		if (x+a >= 0 && x+a < EV3_X_LCD) \
			EV3_PIXEL_UNSET(x+a, y-b); \
		if (x-a >= 0 && x-a < EV3_X_LCD) \
			EV3_PIXEL_UNSET(x-a, y-b); \
	} \
}
typedef char ev3_string[EV3_STRING_LENGTH];
enum ev3_bin_data_format_enum {
	U8,
	S8,
	U16,
	S16,
	S16_BE,
	S32,
	FLOAT
};
typedef struct ev3_sensor_struct *ev3_sensor_ptr;
typedef struct ev3_sensor_struct {
	ev3_string driver_name;
	int32_t port;
	int32_t sensor_nr;
	int32_t bin_fd;
	int32_t val_fd[8];
	union {
		uint8_t u8;
		int8_t s8;
		uint16_t u16;
		int16_t s16;
		int16_t s16_be;
		int32_t s32;
		float f;
	} bin_data[8];
	union {
		int32_t s32;
		float f;
	} val_data[8];
	int32_t data_count;
	enum ev3_bin_data_format_enum bin_data_format;
	ev3_string units;
	int32_t decimals;
	int32_t poll_ms;
	ev3_string modes[16];
	int32_t mode_count;
	int32_t mode;
	ev3_sensor_ptr next;
} ev3_sensor;
enum ev3_motor_identifier {
	FI_L12_EV3,
	LEGO_EV3_L_MOTOR,
	LEGO_EV3_M_MOTOR,
	UNKNOWN_MOTOR
};
typedef struct ev3_motor_struct *ev3_motor_ptr;
typedef struct ev3_motor_struct {
	ev3_string driver_name;
    enum ev3_motor_identifier driver_identifier;
	char port;
	int32_t motor_nr;
	int32_t duty_cycle_fd;
	int32_t duty_cycle_sp_fd;
	int32_t position_fd;
	int32_t position_sp_fd;
	int32_t speed_fd;
	int32_t speed_sp_fd;
	int32_t ramp_up_sp_fd;
	int32_t ramp_down_sp_fd;
	int32_t time_sp_fd;
	FILE* command_stream;
	ev3_string commands[16];
	int32_t command_count;
	ev3_string stop_actions[16];
	int32_t stop_action_count;
	int32_t stop_action;
	int32_t max_speed;
	ev3_motor_ptr next;
} ev3_motor;
enum ev3_button_identifier {
	BUTTON_LEFT,
	BUTTON_UP,
	BUTTON_RIGHT,
	BUTTON_DOWN,
	BUTTON_CENTER,
	BUTTON_BACK
};
enum ev3_led_name {
	LEFT_LED = 0,
	RIGHT_LED = 2
};
enum ev3_led_color {
	GREEN_LED = 0,
	RED_LED = 1
};
int32_t ev3_read_file(char* file, char* buffer, int32_t size) {
	int32_t fd = open(file, O_RDONLY);
	if (fd < 0) return fd;
	int32_t c = read(fd, buffer, size);
	if (c > 0) c--;
	buffer[c] = 0;
	close(fd);
	return 0;
}
int32_t ev3_write_file(char* file, char* buffer, int32_t size) {
	int32_t fd = open(file, O_WRONLY);
	if (fd < 0) return fd;
	int32_t c = write(fd, buffer, size);
	close(fd);
	return 0;
}
enum ev3_bin_data_format_enum get_data_format(char* buffer) {
	if (strcmp(buffer, "u8") == 0) return U8;
	if (strcmp(buffer, "s8") == 0) return S8;
	if (strcmp(buffer, "u16") == 0) return U16;
	if (strcmp(buffer, "s16") == 0) return S16;
	if (strcmp(buffer, "s16_be") == 0) return S16_BE;
	if (strcmp(buffer, "s32") == 0) return S32;
	if (strcmp(buffer, "float") == 0) return FLOAT;
	return S32;
}
void load_sensor(ev3_sensor_ptr sensor, int32_t nr) {
	ev3_string buffer;
	char file[1024];
	sprintf(file, "/sys/class/lego-sensor/sensor%i/driver_name", nr);
	ev3_read_file(file, sensor->driver_name, EV3_STRING_LENGTH);
	sprintf(file, "/sys/class/lego-sensor/sensor%i/address", nr);
	ev3_read_file(file, buffer, EV3_STRING_LENGTH);
	sensor->port = atoi(&buffer[12]);
	sensor->sensor_nr = nr;
	sensor->bin_fd = -1;
	int32_t i;
	for (i = 0; i < 8; i++) sensor->val_fd[i] = -1;
	memset(sensor->bin_data, 0, 32);
	sprintf(file, "/sys/class/lego-sensor/sensor%i/num_values", nr);
	ev3_read_file(file, buffer, EV3_STRING_LENGTH);
	sensor->data_count = atoi(buffer);
	sprintf(file, "/sys/class/lego-sensor/sensor%i/bin_data_format", nr);
	ev3_read_file(file, buffer, EV3_STRING_LENGTH);
	sensor->bin_data_format = get_data_format(buffer);
	sprintf(file, "/sys/class/lego-sensor/sensor%i/units", nr);
	ev3_read_file(file, sensor->units, EV3_STRING_LENGTH);
	sprintf(file, "/sys/class/lego-sensor/sensor%i/decimals", nr);
	ev3_read_file(file, buffer, EV3_STRING_LENGTH);
	sensor->decimals = atoi(buffer);
	sprintf(file, "/sys/class/lego-sensor/sensor%i/poll_ms", nr);
	if (ev3_read_file(file, buffer, EV3_STRING_LENGTH)) sensor->poll_ms = atoi(buffer);
	else sensor->poll_ms = -1;
	sprintf(file, "/sys/class/lego-sensor/sensor%i/modes", nr);
	ev3_read_file(file, file, 1024);
	sensor->mode_count = 0;
	char* mom = file;
	char* end;
	while (end = strchr(mom, ' ')) {
		end[0] = 0;
		sprintf(sensor->modes[sensor->mode_count], "%s", mom);
		sensor->mode_count++;
		mom = end;
		mom++;
	}
	sprintf(sensor->modes[sensor->mode_count], "%s", mom);
	sensor->mode_count++;
	sprintf(file, "/sys/class/lego-sensor/sensor%i/mode", nr);
	ev3_read_file(file, buffer, EV3_STRING_LENGTH);
	for (sensor->mode = 0; sensor->mode < sensor->mode_count; sensor->mode++)
		if (strcmp(sensor->modes[sensor->mode], buffer) == 0) break;
}
ev3_sensor_ptr ev3_load_sensors(void) {
	DIR *d;
	struct dirent *dir;
	ev3_sensor_ptr first_sensor = NULL;
	ev3_sensor_ptr last_sensor = NULL;
	d = opendir("/sys/class/lego-sensor");
	if (d) {
		while ((dir = readdir(d)) != NULL) {
			if (strcmp(dir->d_name, ".") == 0 || strcmp(dir->d_name, "..") == 0) continue;
			ev3_sensor_ptr sensor = (ev3_sensor_ptr)malloc(sizeof(ev3_sensor));
			load_sensor(sensor, atoi(&(dir->d_name[6])));
			sensor->next = NULL;
			if (last_sensor) last_sensor->next = sensor;
			else first_sensor = sensor;
			last_sensor = sensor;
		}
		closedir(d);
	}
	return first_sensor;
}
void ev3_close_sensor(ev3_sensor_ptr sensor) {
	if (sensor == NULL) return;
	if (sensor->bin_fd >= 0) {
		close(sensor->bin_fd);
		sensor->bin_fd = -1;
	}
	int32_t i;
	for (i = 0; i < sensor->data_count; i++)
		if (sensor->val_fd[i] >= 0) {
			close(sensor->val_fd[i]);
			sensor->val_fd[i] = -1;
		}
}
void ev3_delete_sensors(ev3_sensor_ptr sensors) {
	while (sensors) {
		ev3_sensor_ptr next = sensors->next;
		ev3_close_sensor(sensors);
		free(sensors);
		sensors = next;
	}
}
ev3_sensor_ptr ev3_open_sensor(ev3_sensor_ptr sensor) {
	if (sensor == NULL) return NULL;
	if (sensor->bin_fd < 0) {
		char file[1024];
		sprintf(file, "/sys/class/lego-sensor/sensor%i/bin_data", sensor->sensor_nr);
		sensor->bin_fd = open(file, O_RDONLY);
	}
	int32_t i;
	for (i = 0; i < sensor->data_count; i++)
		if (sensor->val_fd[i] < 0) {
			char file[1024];
			sprintf(file, "/sys/class/lego-sensor/sensor%i/value%i", sensor->sensor_nr, i);
			sensor->val_fd[i] = open(file, O_RDONLY);
		}
	return sensor;
}
/*
ev3_sensor_ptr ev3_search_sensor_by_name(ev3_sensor_ptr sensors, char* name, int32_t not_ready) {
	ev3_sensor_ptr sensor = sensors;
	while (sensor) {
		if (strcmp(sensor->driver_name, name) == 0) {
			if (not_ready == 0) return sensor;
			if (sensor->bin_fd < 0) return sensor;
		}
		sensor = sensor->next;
	}
	return NULL;
}
ev3_sensor_ptr ev3_search_sensor_by_port(ev3_sensor_ptr sensors, int32_t port) {
	ev3_sensor_ptr sensor = sensors;
	while (sensor) {
		if (sensor->port == port) return sensor;
		sensor = sensor->next;
	}
	return NULL;
}
*/
void ev3_update_sensor_bin(ev3_sensor_ptr sensor) {
	if (sensor == NULL) return;
	lseek(sensor->bin_fd, 0, SEEK_SET);
	int32_t i, r;
	switch (sensor->bin_data_format) {
		case U8: case S8:
			for (i = 0; i < sensor->data_count; i++)
				r = read(sensor->bin_fd, &(sensor->bin_data[i]), 1);
			break;
		case U16: case S16:
			for (i = 0; i < sensor->data_count; i++)
				r = read(sensor->bin_fd, &(sensor->bin_data[i]), 2);
			break;
		case S16_BE:
			for (i = 0; i < sensor->data_count; i++) {
				uint8_t* data = (uint8_t*)&(sensor->bin_data[i]);
				r = read(sensor->bin_fd, &(data[3]), 1);
				r = read(sensor->bin_fd, &(data[2]), 1);
			}
			break;
		default:
			r = read(sensor->bin_fd, sensor->bin_data, sensor->data_count * 4);
			break;
	}
}
void ev3_update_sensor_val(ev3_sensor_ptr sensor) {
	if (sensor == NULL) return;
	int32_t i;
	ev3_string buffer;
	for (i = 0; i < sensor->data_count; i++) {
		lseek(sensor->val_fd[i], 0, SEEK_SET);
		int32_t c = read(sensor->val_fd[i], buffer, EV3_STRING_LENGTH);
		if (c > 0) {
			c--;
			buffer[c] = 0;
			if (sensor->bin_data_format == FLOAT) sensor->val_data[i].f = atof(buffer);
			else sensor->val_data[i].s32 = atoi(buffer);
		}
	}
}
ev3_sensor_ptr ev3_mode_sensor(ev3_sensor_ptr sensor, int32_t mode) {
	if (sensor == NULL) return NULL;
	if (mode < 0) return sensor;
	if (mode >= sensor->mode_count) return sensor;
	char file[1024];
	sprintf(file, "/sys/class/lego-sensor/sensor%i/mode", sensor->sensor_nr);
	int32_t fd = open(file, O_WRONLY);
	int32_t l = strlen(sensor->modes[mode]);
	int32_t r = write(fd, sensor->modes[mode], l);
	if (l == r) {
		sensor->mode = mode;
		ev3_string buffer;
		sprintf(file, "/sys/class/lego-sensor/sensor%i/num_values", sensor->sensor_nr);
		ev3_read_file(file, buffer, EV3_STRING_LENGTH);
		sensor->data_count = atoi(buffer);
		sprintf(file, "/sys/class/lego-sensor/sensor%i/units", sensor->sensor_nr);
		ev3_read_file(file, sensor->units, EV3_STRING_LENGTH);
		if (sensor->bin_fd >= 0) {
			ev3_close_sensor(sensor);
			ev3_open_sensor(sensor);
		}
	}
	close(fd);
	return sensor;
}
/*
ev3_sensor_ptr ev3_mode_sensor_by_name(ev3_sensor_ptr sensor, char* mode) {
	if (sensor == NULL) return NULL;
	if (mode == NULL) return sensor;
	int32_t i;
	for (i = 0; i < sensor->mode_count; i++)
		if (strcmp(sensor->modes[i], mode) == 0) return ev3_mode_sensor(sensor, i);
	return sensor;
}
ev3_sensor_ptr ev3_driver_sensor(ev3_sensor_ptr sensor, const char* driver) {
	if (sensor == NULL) return NULL;
	int32_t was_open = (sensor->bin_fd >= 0);
	if (was_open) ev3_close_sensor(sensor);
	char file[1024];
	sprintf(file, "/sys/class/lego-port/port%i/set_device", sensor->port-1);
	int32_t fd = open(file, O_WRONLY);
	int32_t l = strlen(driver);
	int32_t r = write(fd, driver, l);
	close(fd);
	if (l == r) {
		sprintf(file, "/sys/class/lego-port/port%i/ev3-ports:in%i:%s/lego-sensor", sensor->port-1, sensor->port, driver);
		DIR *d;
		struct dirent *dir;
		d = opendir(file);
		int32_t nr = sensor->sensor_nr;
		if (d) {
			while ((dir = readdir(d)) != NULL) {
				if (strcmp(dir->d_name, ".") == 0 || strcmp(dir->d_name, "..") == 0) continue;
				break;
			}
			nr = atoi(&(dir->d_name[6]));
			closedir(d);
		}
		load_sensor(sensor, nr);
	}
	if (was_open) ev3_open_sensor(sensor);
	return sensor;
}
*/
enum ev3_motor_identifier get_motor_identifier(char* buffer) {
	if (strcmp(buffer, "fi-l12-ev3") == 0) return FI_L12_EV3;
	if (strcmp(buffer, "lego-ev3-l-motor") == 0) return LEGO_EV3_L_MOTOR;
	if (strcmp(buffer, "lego-ev3-m-motor") == 0) return LEGO_EV3_M_MOTOR;
	return UNKNOWN_MOTOR;
}
void load_motor(ev3_motor_ptr motor, int32_t nr) {
	if (motor == NULL) return;
	ev3_string buffer;
	char file[1024];
	sprintf(file, "/sys/class/tacho-motor/motor%i/driver_name", nr);
	ev3_read_file(file, motor->driver_name, EV3_STRING_LENGTH);
	motor->driver_identifier = get_motor_identifier(motor->driver_name);
	sprintf(file, "/sys/class/tacho-motor/motor%i/address", nr);
	ev3_read_file(file, buffer, EV3_STRING_LENGTH);
	motor->port = buffer[13];
	motor->motor_nr = nr;
	motor->duty_cycle_fd = -1;
	motor->duty_cycle_sp_fd = -1;
	motor->position_fd = -1;
	motor->position_sp_fd = -1;
	motor->speed_fd = -1;
	motor->speed_sp_fd = -1;
	motor->ramp_up_sp_fd = -1;
	motor->ramp_down_sp_fd = -1;
	motor->time_sp_fd = -1;
	motor->command_stream = NULL;
	sprintf(file, "/sys/class/tacho-motor/motor%i/commands", nr);
	ev3_read_file(file, file, 1024);
	motor->command_count = 0;
	char* mom = file;
	char* end;
	while (end = strchr(mom, ' ')) {
		end[0] = 0;
		sprintf(motor->commands[motor->command_count], "%s", mom);
		motor->command_count++;
		mom = end;
		mom++;
	}
	sprintf(motor->commands[motor->command_count], "%s", mom);
	motor->command_count++;
	sprintf(file, "/sys/class/tacho-motor/motor%i/stop_actions", nr);
	ev3_read_file(file, file, 1024);
	motor->stop_action_count = 0;
	mom = file;
	while (end = strchr(mom, ' ')) {
		end[0] = 0;
		sprintf(motor->stop_actions[motor->stop_action_count], "%s", mom);
		motor->stop_action_count++;
		mom = end;
		mom++;
	}
	sprintf(motor->stop_actions[motor->stop_action_count], "%s", mom);
	motor->stop_action_count++;
	sprintf(file, "/sys/class/tacho-motor/motor%i/stop_action", nr);
	ev3_read_file(file, buffer, EV3_STRING_LENGTH);
	for (motor->stop_action = 0; motor->stop_action < motor->stop_action_count; motor->stop_action++)
		if (strcmp(motor->stop_actions[motor->stop_action], buffer) == 0) break;
	sprintf(file, "/sys/class/tacho-motor/motor%i/max_speed", nr);
	ev3_read_file(file, file, EV3_STRING_LENGTH);
	motor->max_speed = atoi(file);
}
ev3_motor_ptr ev3_load_motors(void) {
	DIR *d;
	struct dirent *dir;
	ev3_motor_ptr first_motor = NULL;
	ev3_motor_ptr last_motor = NULL;
	d = opendir("/sys/class/tacho-motor");
	if (d) {
		while ((dir = readdir(d)) != NULL) {
			if (strcmp(dir->d_name, ".") == 0 || strcmp(dir->d_name, "..") == 0) continue;
			ev3_motor_ptr motor = (ev3_motor_ptr)malloc(sizeof(ev3_motor));
			load_motor(motor, atoi(&(dir->d_name[5])));
			motor->next = NULL;
			if (last_motor) last_motor->next = motor;
			else first_motor = motor;
			last_motor = motor;
		}
		closedir(d);
	}
	return first_motor;
}
void ev3_close_motor(ev3_motor_ptr motor) {
	if (motor == NULL) return;
	if (motor->duty_cycle_fd >= 0) {
		close(motor->duty_cycle_fd);
		motor->duty_cycle_fd = -1;
	}
	if (motor->duty_cycle_sp_fd >= 0) {
		close(motor->duty_cycle_sp_fd);
		motor->duty_cycle_sp_fd = -1;
	}
	if (motor->position_fd >= 0) {
		close(motor->position_fd);
		motor->position_fd = -1;
	}
	if (motor->position_sp_fd >= 0) {
		close(motor->position_sp_fd);
		motor->position_sp_fd = -1;
	}
	if (motor->speed_fd >= 0) {
		close(motor->speed_fd);
		motor->speed_fd = -1;
	}
	if (motor->speed_sp_fd >= 0) {
		close(motor->speed_sp_fd);
		motor->speed_sp_fd = -1;
	}
	if (motor->ramp_up_sp_fd >= 0) {
		close(motor->ramp_up_sp_fd);
		motor->ramp_up_sp_fd = -1;
	}
	if (motor->ramp_down_sp_fd >= 0) {
		close(motor->ramp_down_sp_fd);
		motor->ramp_down_sp_fd = -1;
	}
	if (motor->time_sp_fd >= 0) {
		close(motor->time_sp_fd);
		motor->time_sp_fd = -1;
	}
	if (motor->command_stream != NULL) {
		fclose(motor->command_stream);
		motor->command_stream = NULL;
	}
}
ev3_motor_ptr ev3_open_motor(ev3_motor_ptr motor) {
	if (motor == NULL) return NULL;
	if (motor->duty_cycle_fd < 0) {
		char file[1024];
		sprintf(file, "/sys/class/tacho-motor/motor%i/duty_cycle", motor->motor_nr);
		motor->duty_cycle_fd = open(file, O_RDONLY);
	}
	if (motor->duty_cycle_sp_fd < 0) {
		char file[1024];
		sprintf(file, "/sys/class/tacho-motor/motor%i/duty_cycle_sp", motor->motor_nr);
		motor->duty_cycle_sp_fd = open(file, O_RDWR);
	}
	if (motor->position_fd < 0) {
		char file[1024];
		sprintf(file, "/sys/class/tacho-motor/motor%i/position", motor->motor_nr);
		motor->position_fd = open(file, O_RDWR);
	}
	if (motor->position_sp_fd < 0) {
		char file[1024];
		sprintf(file, "/sys/class/tacho-motor/motor%i/position_sp", motor->motor_nr);
		motor->position_sp_fd = open(file, O_RDWR);
	}
	if (motor->speed_fd < 0) {
		char file[1024];
		sprintf(file, "/sys/class/tacho-motor/motor%i/speed", motor->motor_nr);
		motor->speed_fd = open(file, O_RDONLY);
	}
	if (motor->speed_sp_fd < 0) {
		char file[1024];
		sprintf(file, "/sys/class/tacho-motor/motor%i/speed_sp", motor->motor_nr);
		motor->speed_sp_fd = open(file, O_RDWR);
	}
	if (motor->ramp_up_sp_fd < 0) {
		char file[1024];
		sprintf(file, "/sys/class/tacho-motor/motor%i/ramp_up_sp", motor->motor_nr);
		motor->ramp_up_sp_fd = open(file, O_RDWR);
	}
	if (motor->ramp_down_sp_fd < 0) {
		char file[1024];
		sprintf(file, "/sys/class/tacho-motor/motor%i/ramp_down_sp", motor->motor_nr);
		motor->ramp_down_sp_fd = open(file, O_RDWR);
	}
	if (motor->time_sp_fd < 0) {
		char file[1024];
		sprintf(file, "/sys/class/tacho-motor/motor%i/time_sp", motor->motor_nr);
		motor->time_sp_fd = open(file, O_RDWR);
	}
	if (motor->command_stream == NULL) {
		char filename[1024];
		sprintf(filename, "/sys/class/tacho-motor/motor%i/command", motor->motor_nr);
		motor->command_stream = fopen(filename, "w");
	}
	return motor;
}
ev3_motor_ptr ev3_reset_motor(ev3_motor_ptr motor) {
	if (motor == NULL) return NULL;
	int32_t was_open = (motor->duty_cycle_fd >= 0);
	if (was_open) ev3_close_motor(motor);
	char file[1024];
	sprintf(file, "/sys/class/tacho-motor/motor%i/command", motor->motor_nr);
	int32_t fd = open(file, O_WRONLY);
	int32_t l = strlen("reset");
	int32_t r = write(fd, "reset", l);
	close(fd);
	load_motor(motor, motor->motor_nr);
	if (was_open) ev3_open_motor(motor);
	return motor;
}
void ev3_delete_motors(ev3_motor_ptr motors) {
	while (motors) {
		ev3_motor_ptr next = motors->next;
		ev3_close_motor(motors);
		ev3_reset_motor(motors);
		free(motors);
		motors = next;
	}
}
/*
ev3_motor_ptr ev3_search_motor_by_identifier(ev3_motor_ptr motors, enum ev3_motor_identifier identifier, int32_t not_ready) {
	ev3_motor_ptr motor = motors;
	while (motor) {
		if (motor->driver_identifier == identifier) {
			if (not_ready == 0) return motor;
			if (motor->duty_cycle_fd < 0) return motor;
		}
		motor = motor->next;
	}
	return NULL;
}
ev3_motor_ptr ev3_search_motor_by_port(ev3_motor_ptr motors, char port) {
	ev3_motor_ptr motor = motors;
	while (motor) {
		if (motor->port == port) return motor;
		motor = motor->next;
	}
	return NULL;
}
*/
ev3_motor_ptr ev3_command_motor(ev3_motor_ptr motor, int32_t command) {
	if (motor == NULL) return NULL;
	if (command < 0) return motor;
	if (command >= motor->command_count) return motor;
	fwrite(motor->commands[command],
	       strlen(motor->commands[command]),
	       1,
	       motor->command_stream);
	fflush(motor->command_stream);
	return motor;
}
/*
ev3_motor_ptr ev3_command_motor_by_name(ev3_motor_ptr motor, char* command) {
	if (motor == NULL) return NULL;
	if (command == NULL) return motor;
	int32_t i;
	for (i = 0; i < motor->command_count; i++)
		if (strcmp(motor->commands[i], command) == 0)
			return ev3_command_motor(motor, i);
	return motor;
}
*/
ev3_motor_ptr ev3_stop_action_motor(ev3_motor_ptr motor, int32_t stop_action) {
	if (motor == NULL) return NULL;
	if (stop_action < 0) return motor;
	if (stop_action >= motor->stop_action_count) return motor;
	char file[1024];
	sprintf(file, "/sys/class/tacho-motor/motor%i/stop_action", motor->motor_nr);
	int32_t fd = open(file, O_WRONLY);
	int32_t l = strlen(motor->stop_actions[stop_action]);
	int32_t r = write(fd, motor->stop_actions[stop_action], l);
	if (l == r) motor->stop_action = stop_action;
	close(fd);
	return motor;
}
ev3_motor_ptr ev3_stop_action_motor_by_name(ev3_motor_ptr motor, char* stop_action) {
	if (motor == NULL) return NULL;
	if (stop_action == NULL) return motor;
	int32_t i;
	for (i = 0; i < motor->stop_action_count; i++)
		if (strcmp(motor->stop_actions[i], stop_action) == 0)
			return ev3_stop_action_motor(motor, i);
	return motor;
}
/*
int32_t ev3_get_duty_cycle(ev3_motor_ptr motor) {
	if (motor == NULL) return 0;
	char buffer[32];
	lseek(motor->duty_cycle_fd, 0, SEEK_SET);
	buffer[read(motor->duty_cycle_fd, buffer, 32)] = 0;
	return atoi(buffer);
}
ev3_motor_ptr ev3_set_duty_cycle_sp(ev3_motor_ptr motor, int32_t value) {
	if (motor == NULL) return NULL;
	char buffer[32];
	sprintf(buffer, "%i", value);
	lseek(motor->duty_cycle_sp_fd, 0, SEEK_SET);
	int32_t l = write(motor->duty_cycle_sp_fd, buffer, strlen(buffer));
	return motor;
}
int32_t ev3_get_duty_cycle_sp(ev3_motor_ptr motor) {
	if (motor == NULL) return 0;
	char buffer[32];
	lseek(motor->duty_cycle_sp_fd, 0, SEEK_SET);
	buffer[read(motor->duty_cycle_sp_fd, buffer, 32)] = 0;
	return atoi(buffer);
}
int32_t ev3_get_speed(ev3_motor_ptr motor) {
	if (motor == NULL) return 0;
	char buffer[32];
	lseek(motor->speed_fd, 0, SEEK_SET);
	buffer[read(motor->speed_fd, buffer, 32)] = 0;
	return atoi(buffer);
}
*/
ev3_motor_ptr ev3_set_speed_sp(ev3_motor_ptr motor, int32_t value) {
	if (motor == NULL) return NULL;
	char buffer[32];
	sprintf(buffer, "%i", value);
	lseek(motor->speed_sp_fd, 0, SEEK_SET);
	int32_t l = write(motor->speed_sp_fd, buffer, strlen(buffer));
	return motor;
}
/*
int32_t ev3_get_speed_sp(ev3_motor_ptr motor) {
	if (motor == NULL) return 0;
	char buffer[32];
	lseek(motor->speed_sp_fd, 0, SEEK_SET);
	buffer[read(motor->speed_sp_fd, buffer, 32)] = 0;
	return atoi(buffer);
}
*/
ev3_motor_ptr ev3_set_position(ev3_motor_ptr motor, int32_t value) {
	if (motor == NULL) return NULL;
	char buffer[32];
	sprintf(buffer, "%i", value);
	lseek(motor->position_fd, 0, SEEK_SET);
	int32_t l = write(motor->position_fd, buffer, strlen(buffer));
	return motor;
}
int32_t ev3_get_position(ev3_motor_ptr motor) {
	if (motor == NULL) return 0;
	char buffer[32];
	lseek(motor->position_fd, 0, SEEK_SET);
	buffer[read(motor->position_fd, buffer, 32)] = 0;
	return atoi(buffer);
}
ev3_motor_ptr ev3_set_position_sp(ev3_motor_ptr motor, int32_t value) {
	if (motor == NULL) return NULL;
	char buffer[32];
	sprintf(buffer, "%i", value);
	lseek(motor->position_sp_fd, 0, SEEK_SET);
	int32_t l = write(motor->position_sp_fd, buffer, strlen(buffer));
	return motor;
}
/*
int32_t ev3_get_position_sp(ev3_motor_ptr motor) {
	if (motor == NULL) return 0;
	char buffer[32];
	lseek(motor->position_sp_fd, 0, SEEK_SET);
	buffer[read(motor->position_sp_fd, buffer, 32)] = 0;
	return atoi(buffer);
}
ev3_motor_ptr ev3_set_ramp_up_sp(ev3_motor_ptr motor, int32_t value) {
	if (motor == NULL) return NULL;
	char buffer[32];
	sprintf(buffer, "%i", value);
	lseek(motor->ramp_up_sp_fd, 0, SEEK_SET);
	int32_t l = write(motor->ramp_up_sp_fd, buffer, strlen(buffer));
	return motor;
}
int32_t ev3_get_ramp_up_sp(ev3_motor_ptr motor) {
	if (motor == NULL) return 0;
	char buffer[32];
	lseek(motor->ramp_up_sp_fd, 0, SEEK_SET);
	buffer[read(motor->ramp_up_sp_fd, buffer, 32)] = 0;
	return atoi(buffer);
}
ev3_motor_ptr ev3_set_ramp_down_sp(ev3_motor_ptr motor, int32_t value) {
	if (motor == NULL) return NULL;
	char buffer[32];
	sprintf(buffer, "%i", value);
	lseek(motor->ramp_down_sp_fd, 0, SEEK_SET);
	int32_t l = write(motor->ramp_down_sp_fd, buffer, strlen(buffer));
	return motor;
}
int32_t ev3_get_ramp_down_sp(ev3_motor_ptr motor) {
	if (motor == NULL) return 0;
	char buffer[32];
	lseek(motor->ramp_down_sp_fd, 0, SEEK_SET);
	buffer[read(motor->ramp_down_sp_fd, buffer, 32)] = 0;
	return atoi(buffer);
}
ev3_motor_ptr ev3_set_time_sp(ev3_motor_ptr motor, int32_t value) {
	if (motor == NULL) return NULL;
	char buffer[32];
	sprintf(buffer, "%i", value);
	lseek(motor->time_sp_fd, 0, SEEK_SET);
	int32_t l = write(motor->time_sp_fd, buffer, strlen(buffer));
	return motor;
}
int32_t ev3_get_time_sp(ev3_motor_ptr motor) {
	if (motor == NULL) return 0;
	char buffer[32];
	lseek(motor->time_sp_fd, 0, SEEK_SET);
	buffer[read(motor->time_sp_fd, buffer, 32)] = 0;
	return atoi(buffer);
}
int32_t ev3_motor_state(ev3_motor_ptr motor) {
	if (motor == NULL) return 0;
	char file[1024];
	sprintf(file, "/sys/class/tacho-motor/motor%i/state", motor->motor_nr);
	ev3_read_file(file, file, 1024);
	int32_t result = 0;
	char* mom = file;
	char* end;
	while ((end = strchr(mom, ' ')) || mom) {
		if (end) end[0] = 0;
		if (strcmp(mom, "running") == 0) result |= MOTOR_RUNNING;
		else if (strcmp(mom, "ramping") == 0) result |= MOTOR_RAMPING;
		else if (strcmp(mom, "holding") == 0) result |= MOTOR_HOLDING;
		else if (strcmp(mom, "stalled") == 0) result |= MOTOR_STALLED;
		mom = end;
		if (mom) mom++;
		else break;
	}
	return result;
}
*/
ev3_motor_ptr ev3_set_polarity(ev3_motor_ptr motor, int32_t value) {
	if (motor == NULL) return NULL;
	char file[1024];
	sprintf(file, "/sys/class/tacho-motor/motor%i/polarity", motor->motor_nr);
	int32_t fd = open(file, O_WRONLY);
	if (fd < 0) return NULL;
	int32_t l;
	if (value == -1) l = write(motor->time_sp_fd, "inversed", strlen("inversed"));
	else if (value == 1) l = write(motor->time_sp_fd, "normal", strlen("normal"));
	close(fd);
	return motor;
}
/*
int32_t ev3_get_polarity(ev3_motor_ptr motor) {
	if (motor == NULL) return 0;
	char file[1024];
	sprintf(file, "/sys/class/tacho-motor/motor%i/polarity", motor->motor_nr);
	ev3_read_file(file, file, 1024);
	if (strcmp(file, "inversed") == 0) return -1;
	return 1;
}
*/
static char large_font_bits[] = {
  0x00, 0x00, 0x80, 0x03, 0xE0, 0x38, 0x00, 0x63, 0x00, 0x03, 0x00, 0x0C,
  0xE0, 0x01, 0x00, 0x07, 0x00, 0x06, 0xC0, 0x00, 0x80, 0x01, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x18, 0x00, 0x00, 0x80, 0x03,
  0xE0, 0x38, 0x00, 0x63, 0x00, 0x03, 0x00, 0x0C, 0xF0, 0x07, 0x00, 0x07,
  0x00, 0x07, 0xC0, 0x01, 0x80, 0x01, 0x00, 0x03, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x18, 0x00, 0x00, 0x80, 0x03, 0xE0, 0x38, 0x80, 0x31,
  0xE0, 0x1F, 0x38, 0x0E, 0x38, 0x0E, 0x00, 0x07, 0x80, 0x03, 0x80, 0x03,
  0x98, 0x19, 0x00, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1C,
  0x00, 0x00, 0x80, 0x03, 0x70, 0x1C, 0x80, 0x31, 0xF8, 0x7F, 0x7C, 0x06,
  0x18, 0x0C, 0x80, 0x03, 0x80, 0x03, 0x80, 0x03, 0xB0, 0x0D, 0x00, 0x03,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0C, 0x00, 0x00, 0x80, 0x03,
  0x70, 0x1C, 0xF0, 0xFF, 0x3C, 0x73, 0x6C, 0x06, 0x18, 0x0C, 0x80, 0x03,
  0xC0, 0x01, 0x00, 0x07, 0xE0, 0x07, 0x00, 0x03, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x0C, 0x00, 0x00, 0x80, 0x03, 0x30, 0x0C, 0xF0, 0xFF,
  0x3C, 0x63, 0x6C, 0x07, 0x38, 0x06, 0x80, 0x01, 0xC0, 0x01, 0x00, 0x07,
  0xC0, 0x03, 0x00, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0E,
  0x00, 0x00, 0x80, 0x03, 0x00, 0x00, 0xC0, 0x18, 0x78, 0x03, 0x7C, 0x03,
  0xF0, 0x03, 0x00, 0x00, 0xE0, 0x00, 0x00, 0x0E, 0xE0, 0x07, 0x00, 0x03,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x06, 0x00, 0x00, 0x80, 0x03,
  0x00, 0x00, 0xC0, 0x18, 0xF0, 0x1F, 0x38, 0x03, 0xF0, 0x31, 0x00, 0x00,
  0xE0, 0x00, 0x00, 0x0E, 0xB0, 0x0D, 0xFC, 0xFF, 0x00, 0x00, 0xF0, 0x1F,
  0x00, 0x00, 0x00, 0x06, 0x00, 0x00, 0x80, 0x03, 0x00, 0x00, 0x60, 0x0C,
  0xC0, 0x7F, 0x80, 0x03, 0xB8, 0x33, 0x00, 0x00, 0xE0, 0x00, 0x00, 0x0E,
  0x98, 0x19, 0xFC, 0xFF, 0x00, 0x00, 0xF0, 0x1F, 0x00, 0x00, 0x00, 0x03,
  0x00, 0x00, 0x80, 0x03, 0x00, 0x00, 0x60, 0x0C, 0x00, 0xFB, 0x80, 0x39,
  0x1C, 0x37, 0x00, 0x00, 0xE0, 0x00, 0x00, 0x0E, 0x80, 0x01, 0x00, 0x03,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0xFC, 0x3F, 0x0C, 0xE3, 0x80, 0x7D, 0x0C, 0x3E, 0x00, 0x00,
  0xC0, 0x01, 0x00, 0x07, 0x80, 0x01, 0x00, 0x03, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x80, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFC, 0x3F,
  0x1C, 0xF3, 0xC0, 0x6D, 0x0C, 0x3C, 0x00, 0x00, 0xC0, 0x01, 0x00, 0x07,
  0x00, 0x00, 0x00, 0x03, 0x00, 0x07, 0x00, 0x00, 0x00, 0x00, 0x80, 0x01,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x30, 0x06, 0xFC, 0x7F, 0xC0, 0x6C,
  0x1C, 0x38, 0x00, 0x00, 0x80, 0x03, 0x80, 0x03, 0x00, 0x00, 0x00, 0x03,
  0x00, 0x07, 0x00, 0x00, 0x00, 0x07, 0x80, 0x01, 0x00, 0x00, 0x80, 0x03,
  0x00, 0x00, 0x30, 0x06, 0xF0, 0x3F, 0xC0, 0x7C, 0x3C, 0x7C, 0x00, 0x00,
  0x80, 0x03, 0x80, 0x03, 0x00, 0x00, 0x00, 0x03, 0x00, 0x07, 0x00, 0x00,
  0x00, 0x07, 0xC0, 0x01, 0x00, 0x00, 0x80, 0x03, 0x00, 0x00, 0x18, 0x03,
  0x00, 0x03, 0xE0, 0x38, 0xF8, 0xEF, 0x00, 0x00, 0x00, 0x07, 0xC0, 0x01,
  0x00, 0x00, 0x00, 0x03, 0xC0, 0x03, 0x00, 0x00, 0x00, 0x07, 0xC0, 0x00,
  0x00, 0x00, 0x80, 0x03, 0x00, 0x00, 0x18, 0x03, 0x00, 0x03, 0x60, 0x00,
  0xF0, 0xC7, 0x00, 0x00, 0x00, 0x06, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x00,
  0xC0, 0x03, 0x00, 0x00, 0x00, 0x07, 0xC0, 0x00, 0xC0, 0x1F, 0x80, 0x03,
  0xE0, 0x1F, 0xE0, 0x1F, 0x00, 0x38, 0xF0, 0x7F, 0x80, 0x7F, 0xF8, 0xFF,
  0xC0, 0x1F, 0xC0, 0x1F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0xF0, 0x1F, 0xE0, 0x3F, 0xC0, 0x03, 0xF8, 0x3F, 0xF8, 0x3F,
  0x00, 0x3C, 0xF0, 0x7F, 0xC0, 0x7F, 0xF8, 0xFF, 0xE0, 0x3F, 0xE0, 0x3F,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF8, 0x3F,
  0xF0, 0x78, 0xF8, 0x03, 0x38, 0x7C, 0x38, 0x7C, 0x00, 0x3E, 0x70, 0x00,
  0xE0, 0x73, 0x00, 0xE0, 0xF0, 0x78, 0xF0, 0x78, 0x00, 0x07, 0x00, 0x07,
  0x00, 0x70, 0x00, 0x00, 0x38, 0x00, 0x38, 0x78, 0x70, 0x70, 0xF8, 0x03,
  0x38, 0x70, 0x38, 0x70, 0x00, 0x3F, 0x70, 0x00, 0xF0, 0x00, 0x00, 0xE0,
  0x70, 0x70, 0x78, 0xF0, 0x00, 0x07, 0x00, 0x07, 0x00, 0x7C, 0x00, 0x00,
  0xF8, 0x00, 0x00, 0x70, 0x78, 0xF0, 0x80, 0x03, 0x00, 0x70, 0x00, 0x70,
  0x80, 0x3B, 0x70, 0x00, 0xF0, 0x00, 0x00, 0x70, 0x70, 0x70, 0x38, 0xE0,
  0x00, 0x07, 0x00, 0x07, 0x00, 0x1F, 0xFC, 0xFF, 0xE0, 0x03, 0x00, 0x70,
  0x38, 0xE0, 0x80, 0x03, 0x00, 0x70, 0x00, 0x38, 0xC0, 0x39, 0x70, 0x00,
  0x38, 0x00, 0x00, 0x78, 0xE0, 0x70, 0x38, 0xE0, 0x00, 0x07, 0x00, 0x07,
  0xC0, 0x03, 0xFC, 0xFF, 0x00, 0x0F, 0x00, 0x78, 0x38, 0xE0, 0x80, 0x03,
  0x00, 0x78, 0x00, 0x1C, 0xE0, 0x38, 0xF0, 0x0F, 0x38, 0x1F, 0x00, 0x3C,
  0xE0, 0x3B, 0x78, 0xF0, 0x00, 0x00, 0x00, 0x00, 0xF0, 0x00, 0x00, 0x00,
  0x00, 0x3C, 0x00, 0x3E, 0x38, 0xE0, 0x80, 0x03, 0x00, 0x3C, 0x80, 0x0F,
  0x70, 0x38, 0xF0, 0x1F, 0xF8, 0x3F, 0x00, 0x1C, 0x80, 0x1F, 0xF0, 0xF8,
  0x00, 0x00, 0x00, 0x00, 0x38, 0x00, 0x00, 0x00, 0x00, 0x70, 0x00, 0x1F,
  0x38, 0xE0, 0x80, 0x03, 0x00, 0x1E, 0x80, 0x0F, 0x38, 0x38, 0x00, 0x3C,
  0xF8, 0x78, 0x00, 0x0E, 0xE0, 0x1F, 0xE0, 0xFF, 0x00, 0x00, 0x00, 0x00,
  0x38, 0x00, 0x00, 0x00, 0x00, 0x70, 0x80, 0x07, 0x38, 0xE0, 0x80, 0x03,
  0x00, 0x0F, 0x00, 0x3C, 0x18, 0x38, 0x00, 0x78, 0x78, 0xF0, 0x00, 0x07,
  0x70, 0x7C, 0xC0, 0xE7, 0x00, 0x00, 0x00, 0x00, 0xF0, 0x00, 0x00, 0x00,
  0x00, 0x3C, 0x80, 0x03, 0x38, 0xE0, 0x80, 0x03, 0x80, 0x07, 0x00, 0x78,
  0xF8, 0xFF, 0x00, 0x70, 0x38, 0xE0, 0x00, 0x07, 0x78, 0xF0, 0x00, 0xE0,
  0x00, 0x07, 0x00, 0x07, 0xC0, 0x03, 0xFC, 0xFF, 0x00, 0x0F, 0x80, 0x03,
  0x78, 0xF0, 0x80, 0x03, 0xC0, 0x03, 0x00, 0x70, 0xF8, 0xFF, 0x00, 0x70,
  0x38, 0xE0, 0x80, 0x03, 0x38, 0xE0, 0x00, 0xF8, 0x00, 0x07, 0x00, 0x07,
  0x00, 0x1F, 0xFC, 0xFF, 0xE0, 0x03, 0x00, 0x00, 0x70, 0x70, 0x80, 0x03,
  0xE0, 0x01, 0x38, 0x78, 0x00, 0x38, 0x38, 0x78, 0x78, 0xF0, 0xC0, 0x03,
  0x38, 0xE0, 0x00, 0x78, 0x00, 0x07, 0x80, 0x07, 0x00, 0x7C, 0x00, 0x00,
  0xF8, 0x00, 0x00, 0x00, 0xF0, 0x78, 0x80, 0x03, 0xF0, 0x00, 0x38, 0x3C,
  0x00, 0x38, 0x38, 0x3C, 0xF0, 0x78, 0xC0, 0x01, 0x78, 0xF0, 0x70, 0x3E,
  0x00, 0x07, 0x80, 0x03, 0x00, 0x70, 0x00, 0x00, 0x38, 0x00, 0x80, 0x03,
  0xE0, 0x3F, 0xF8, 0x3F, 0xF8, 0x7F, 0xF8, 0x1F, 0x00, 0x38, 0xF8, 0x1F,
  0xE0, 0x3F, 0xE0, 0x00, 0xF0, 0x7F, 0xF0, 0x1F, 0x00, 0x00, 0x80, 0x01,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x03, 0xC0, 0x1F, 0xF8, 0x3F,
  0xF8, 0x7F, 0xE0, 0x0F, 0x00, 0x38, 0xE0, 0x0F, 0xC0, 0x1F, 0xE0, 0x00,
  0xE0, 0x3F, 0xF0, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x80, 0x03, 0x80, 0x0F, 0x80, 0x03, 0xFC, 0x0F, 0x80, 0x3F,
  0xFC, 0x07, 0xF8, 0xFF, 0xF8, 0xFF, 0xC0, 0x3F, 0x38, 0xE0, 0xF0, 0x1F,
  0xC0, 0x1F, 0x38, 0x00, 0x38, 0x00, 0x1E, 0xF0, 0xF8, 0xE0, 0x80, 0x07,
  0xE0, 0x3F, 0x80, 0x03, 0xFC, 0x1F, 0xE0, 0xFF, 0xFC, 0x1F, 0xF8, 0xFF,
  0xF8, 0xFF, 0xE0, 0x7F, 0x38, 0xE0, 0xF0, 0x1F, 0xC0, 0x1F, 0x38, 0x00,
  0x38, 0x00, 0x3E, 0xF8, 0xF8, 0xE0, 0xE0, 0x1F, 0xF0, 0x78, 0xC0, 0x07,
  0x1C, 0x3C, 0xF0, 0xE1, 0x1C, 0x3E, 0x38, 0x00, 0x38, 0x00, 0xF0, 0xF0,
  0x38, 0xE0, 0x80, 0x03, 0x00, 0x1C, 0x38, 0x78, 0x38, 0x00, 0x3E, 0xF8,
  0xF8, 0xE1, 0xF0, 0x3F, 0x38, 0x60, 0xC0, 0x07, 0x1C, 0x38, 0x78, 0xC0,
  0x1C, 0x78, 0x38, 0x00, 0x38, 0x00, 0x78, 0xE0, 0x38, 0xE0, 0x80, 0x03,
  0x00, 0x1C, 0x38, 0x3C, 0x38, 0x00, 0x7E, 0xFC, 0xF8, 0xE1, 0x78, 0x78,
  0x1C, 0xEF, 0xE0, 0x0E, 0x1C, 0x38, 0x38, 0x00, 0x1C, 0x70, 0x38, 0x00,
  0x38, 0x00, 0x38, 0x00, 0x38, 0xE0, 0x80, 0x03, 0x00, 0x1C, 0x38, 0x1E,
  0x38, 0x00, 0x6E, 0xEC, 0xF8, 0xE1, 0x38, 0x70, 0x9C, 0xCF, 0xE0, 0x0E,
  0x1C, 0x1C, 0x3C, 0x00, 0x1C, 0xE0, 0x38, 0x00, 0x38, 0x00, 0x3C, 0x00,
  0x38, 0xE0, 0x80, 0x03, 0x00, 0x1C, 0x38, 0x0F, 0x38, 0x00, 0x6E, 0xEC,
  0xB8, 0xE3, 0x3C, 0xF0, 0xCC, 0xCC, 0x70, 0x1C, 0xFC, 0x0F, 0x1C, 0x00,
  0x1C, 0xE0, 0x38, 0x00, 0x38, 0x00, 0x1C, 0x00, 0x38, 0xE0, 0x80, 0x03,
  0x00, 0x1C, 0x38, 0x07, 0x38, 0x00, 0xCE, 0xE6, 0xB8, 0xE7, 0x1C, 0xE0,
  0xCC, 0xCC, 0x78, 0x3C, 0xFC, 0x3F, 0x1C, 0x00, 0x1C, 0xE0, 0xF8, 0xFF,
  0xF8, 0x7F, 0x1C, 0xFE, 0xF8, 0xFF, 0x80, 0x03, 0x00, 0x1C, 0xB8, 0x03,
  0x38, 0x00, 0xCE, 0xE6, 0x38, 0xE7, 0x1C, 0xE0, 0xCC, 0xCC, 0x38, 0x38,
  0x1C, 0x78, 0x1C, 0x00, 0x1C, 0xE0, 0xF8, 0xFF, 0xF8, 0x7F, 0x1C, 0xFE,
  0xF8, 0xFF, 0x80, 0x03, 0x00, 0x1C, 0xF8, 0x07, 0x38, 0x00, 0xCE, 0xE7,
  0x38, 0xE7, 0x1C, 0xE0, 0xCC, 0xCC, 0xF8, 0x3F, 0x1C, 0xF0, 0x3C, 0x00,
  0x1C, 0xE0, 0x38, 0x00, 0x38, 0x00, 0x1C, 0xE0, 0x38, 0xE0, 0x80, 0x03,
  0x00, 0x1C, 0xF8, 0x07, 0x38, 0x00, 0x8E, 0xE3, 0x38, 0xEF, 0x1C, 0xE0,
  0x9C, 0x7F, 0xFC, 0x7F, 0x1C, 0xE0, 0x38, 0x00, 0x1C, 0x70, 0x38, 0x00,
  0x38, 0x00, 0x3C, 0xE0, 0x38, 0xE0, 0x80, 0x03, 0x00, 0x1C, 0x78, 0x0F,
  0x38, 0x00, 0x8E, 0xE3, 0x38, 0xEC, 0x3C, 0xF0, 0x18, 0x7F, 0x1C, 0x70,
  0x1C, 0xE0, 0x78, 0x00, 0x1C, 0x70, 0x38, 0x00, 0x38, 0x00, 0x38, 0xE0,
  0x38, 0xE0, 0x80, 0x03, 0x00, 0x1C, 0x38, 0x1E, 0x38, 0x00, 0x8E, 0xE3,
  0x38, 0xFC, 0x38, 0x70, 0x38, 0x00, 0x1C, 0x70, 0x1C, 0xF0, 0xF0, 0xC0,
  0x1C, 0x38, 0x38, 0x00, 0x38, 0x00, 0x78, 0xE0, 0x38, 0xE0, 0x80, 0x03,
  0x00, 0x1C, 0x38, 0x3C, 0x38, 0x00, 0x0E, 0xE1, 0x38, 0xF8, 0x78, 0x78,
  0xF0, 0x38, 0x0C, 0xE0, 0x1C, 0x78, 0xE0, 0xE1, 0x1C, 0x3E, 0x38, 0x00,
  0x38, 0x00, 0xF0, 0xF1, 0x38, 0xE0, 0x80, 0x03, 0x70, 0x1E, 0x38, 0x78,
  0x38, 0x00, 0x0E, 0xE0, 0x38, 0xF8, 0xF0, 0x3F, 0xE0, 0x3F, 0x0C, 0xE0,
  0xFC, 0x3F, 0xC0, 0xFF, 0xFC, 0x1F, 0xF8, 0xFF, 0x38, 0x00, 0xE0, 0x7F,
  0x38, 0xE0, 0xF0, 0x1F, 0xF0, 0x0F, 0x38, 0xF0, 0xF8, 0x7F, 0x0E, 0xE0,
  0x38, 0xF0, 0xE0, 0x1F, 0x80, 0x3F, 0x0C, 0xE0, 0xFC, 0x0F, 0x00, 0x3F,
  0xFC, 0x07, 0xF8, 0xFF, 0x38, 0x00, 0x80, 0x3F, 0x38, 0xE0, 0xF0, 0x1F,
  0xF0, 0x07, 0x38, 0xE0, 0xF8, 0x7F, 0x0E, 0xE0, 0x38, 0xF0, 0x80, 0x07,
  0xF8, 0x0F, 0xC0, 0x0F, 0xFC, 0x1F, 0xE0, 0x3F, 0xFE, 0xFF, 0x1C, 0xE0,
  0x38, 0xE0, 0x38, 0xE0, 0x38, 0xE0, 0x38, 0xE0, 0xFC, 0xFF, 0xE0, 0x0F,
  0x60, 0x00, 0xE0, 0x0F, 0x00, 0x03, 0x00, 0x00, 0xF8, 0x1F, 0xE0, 0x1F,
  0xFC, 0x3F, 0xF8, 0xFF, 0xFE, 0xFF, 0x1C, 0xE0, 0x38, 0xE0, 0x38, 0xE0,
  0x78, 0xF0, 0x78, 0xF0, 0xFC, 0xFF, 0xE0, 0x0F, 0x60, 0x00, 0xE0, 0x0F,
  0x80, 0x07, 0x00, 0x00, 0x38, 0x3C, 0xF0, 0x3C, 0x1C, 0x78, 0x3C, 0xF0,
  0x80, 0x03, 0x1C, 0xE0, 0x38, 0xE0, 0x38, 0xE0, 0xF0, 0x78, 0x70, 0x70,
  0x00, 0xE0, 0xE0, 0x00, 0xE0, 0x00, 0x00, 0x0E, 0xC0, 0x0F, 0x00, 0x00,
  0x38, 0x78, 0x78, 0x78, 0x1C, 0xF0, 0x1C, 0xC0, 0x80, 0x03, 0x1C, 0xE0,
  0x38, 0xE0, 0x38, 0xE7, 0xE0, 0x38, 0xE0, 0x38, 0x00, 0xF8, 0xE0, 0x00,
  0xC0, 0x00, 0x00, 0x0E, 0xC0, 0x0C, 0x00, 0x00, 0x38, 0x70, 0x38, 0x70,
  0x1C, 0xE0, 0x1C, 0x00, 0x80, 0x03, 0x1C, 0xE0, 0x78, 0xF0, 0x38, 0xE7,
  0xC0, 0x1D, 0xE0, 0x38, 0x00, 0x7C, 0xE0, 0x00, 0xC0, 0x00, 0x00, 0x0E,
  0x60, 0x18, 0x00, 0x00, 0x38, 0x70, 0x1C, 0xE0, 0x1C, 0xE0, 0x1C, 0x00,
  0x80, 0x03, 0x1C, 0xE0, 0x70, 0x70, 0x38, 0xE7, 0x80, 0x0F, 0xC0, 0x1D,
  0x00, 0x1E, 0xE0, 0x00, 0xC0, 0x01, 0x00, 0x0E, 0x70, 0x38, 0x00, 0x00,
  0x38, 0x70, 0x1C, 0xE0, 0x1C, 0x70, 0x3C, 0x00, 0x80, 0x03, 0x1C, 0xE0,
  0x70, 0x70, 0x38, 0xE7, 0x80, 0x0F, 0xC0, 0x1D, 0x00, 0x0F, 0xE0, 0x00,
  0x80, 0x01, 0x00, 0x0E, 0x38, 0x70, 0x00, 0x00, 0x38, 0x78, 0x1C, 0xE0,
  0x1C, 0x38, 0xF8, 0x0F, 0x80, 0x03, 0x1C, 0xE0, 0xE0, 0x38, 0xB8, 0xEF,
  0x00, 0x07, 0x80, 0x0F, 0x80, 0x07, 0xE0, 0x00, 0x80, 0x01, 0x00, 0x0E,
  0x00, 0x00, 0x00, 0x00, 0x38, 0x3C, 0x9C, 0xE3, 0xFC, 0x1F, 0xF0, 0x7F,
  0x80, 0x03, 0x1C, 0xE0, 0xE0, 0x38, 0xB8, 0xEF, 0x80, 0x0F, 0x00, 0x07,
  0xC0, 0x03, 0xE0, 0x00, 0x00, 0x03, 0x00, 0x0E, 0x00, 0x00, 0x00, 0x00,
  0xF8, 0x1F, 0x9C, 0xE7, 0xFC, 0x0F, 0x80, 0xFF, 0x80, 0x03, 0x1C, 0xE0,
  0xE0, 0x38, 0xB8, 0xED, 0x80, 0x0D, 0x00, 0x07, 0xE0, 0x01, 0xE0, 0x00,
  0x00, 0x03, 0x00, 0x0E, 0x00, 0x00, 0x00, 0x00, 0xF8, 0x0F, 0x9C, 0xEF,
  0x1C, 0x1E, 0x00, 0xF0, 0x80, 0x03, 0x1C, 0xE0, 0xC0, 0x1D, 0xB8, 0xED,
  0xC0, 0x1D, 0x00, 0x07, 0xF0, 0x00, 0xE0, 0x00, 0x00, 0x07, 0x00, 0x0E,
  0x00, 0x00, 0x00, 0x00, 0x38, 0x00, 0x38, 0xFF, 0x1C, 0x1C, 0x00, 0xE0,
  0x80, 0x03, 0x38, 0x70, 0xC0, 0x1D, 0xB8, 0xFD, 0xE0, 0x38, 0x00, 0x07,
  0x78, 0x00, 0xE0, 0x00, 0x00, 0x06, 0x00, 0x0E, 0x00, 0x00, 0x00, 0x00,
  0x38, 0x00, 0x78, 0x7E, 0x1C, 0x38, 0x0C, 0xE0, 0x80, 0x03, 0x38, 0x70,
  0xC0, 0x1D, 0xF0, 0x7D, 0xE0, 0x38, 0x00, 0x07, 0x3C, 0x00, 0xE0, 0x00,
  0x00, 0x06, 0x00, 0x0E, 0x00, 0x00, 0x00, 0x00, 0x38, 0x00, 0xF0, 0x7C,
  0x1C, 0x78, 0x3C, 0xF0, 0x80, 0x03, 0xF0, 0x3C, 0x80, 0x0F, 0xF0, 0x78,
  0x70, 0x70, 0x00, 0x07, 0x3C, 0x00, 0xE0, 0x00, 0x00, 0x0E, 0x00, 0x0E,
  0x00, 0x00, 0x00, 0x00, 0x38, 0x00, 0xE0, 0xFF, 0x1C, 0xF0, 0xFC, 0x7F,
  0x80, 0x03, 0xE0, 0x1F, 0x80, 0x0F, 0xF0, 0x78, 0x78, 0xF0, 0x00, 0x07,
  0xFC, 0xFF, 0xE0, 0x0F, 0x00, 0x0C, 0xE0, 0x0F, 0x00, 0x00, 0xFC, 0xFF,
  0x38, 0x00, 0x80, 0xEF, 0x1C, 0xE0, 0xF0, 0x1F, 0x80, 0x03, 0xC0, 0x0F,
  0x80, 0x0F, 0xF0, 0x78, 0x38, 0xE0, 0x00, 0x07, 0xFC, 0xFF, 0xE0, 0x0F,
  0x00, 0x0C, 0xE0, 0x0F, 0x00, 0x00, 0xFC, 0xFF, 0x00, 0x07, 0x00, 0x00,
  0x38, 0x00, 0x00, 0x00, 0x00, 0x70, 0x00, 0x00, 0x00, 0x3E, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x1C, 0x38, 0x00, 0x80, 0x03, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0x00, 0x00, 0x38, 0x00, 0x00, 0x00,
  0x00, 0x70, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x38, 0x00, 0x80, 0x03,
  0x00, 0x1C, 0x38, 0x00, 0x80, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x07, 0xE0, 0x1F, 0x38, 0x00, 0x00, 0x3F, 0x00, 0x70, 0x80, 0x0F,
  0x80, 0x03, 0x80, 0x77, 0x38, 0x00, 0x80, 0x03, 0x00, 0x1C, 0x38, 0x00,
  0x80, 0x03, 0xEE, 0x38, 0x38, 0x1F, 0xC0, 0x1F, 0x00, 0x0E, 0xF0, 0x3F,
  0x38, 0x00, 0xC0, 0x7F, 0x00, 0x70, 0xE0, 0x3F, 0xC0, 0x01, 0xE0, 0x7F,
  0x38, 0x00, 0x00, 0x00, 0x00, 0x00, 0x38, 0x78, 0x80, 0x03, 0xFE, 0x7D,
  0xB8, 0x3F, 0xE0, 0x3F, 0x00, 0x0C, 0x70, 0x78, 0x38, 0x00, 0xE0, 0x71,
  0x00, 0x70, 0xF0, 0x78, 0xC0, 0x01, 0xF0, 0x7C, 0x38, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x38, 0x3C, 0x80, 0x03, 0xFE, 0xFF, 0xF8, 0x79, 0xF0, 0x78,
  0x00, 0x00, 0x00, 0xE0, 0xB8, 0x0F, 0x70, 0x60, 0x80, 0x77, 0x70, 0x70,
  0xC0, 0x01, 0x78, 0x78, 0xB8, 0x1F, 0x80, 0x03, 0x80, 0x1F, 0x38, 0x1E,
  0x80, 0x03, 0x9E, 0xE7, 0xF8, 0x70, 0x70, 0x70, 0x00, 0x00, 0x00, 0xE0,
  0xF8, 0x1F, 0x70, 0x00, 0xE0, 0x7F, 0x38, 0xE0, 0xF0, 0x1F, 0x38, 0x70,
  0xF8, 0x3F, 0x80, 0x03, 0x80, 0x1F, 0x38, 0x0F, 0x80, 0x03, 0x8E, 0xE3,
  0x38, 0x70, 0x78, 0xF0, 0x00, 0x00, 0x00, 0xE0, 0xF8, 0x3C, 0x38, 0x00,
  0xF0, 0x7C, 0x38, 0xE0, 0xF0, 0x1F, 0x38, 0x70, 0xF8, 0x38, 0x80, 0x03,
  0x00, 0x1C, 0xB8, 0x07, 0x80, 0x03, 0x8E, 0xE3, 0x38, 0x70, 0x38, 0xE0,
  0x00, 0x00, 0xC0, 0xFF, 0x38, 0x78, 0x38, 0x00, 0x78, 0x70, 0xF8, 0xFF,
  0xC0, 0x01, 0x38, 0x78, 0x78, 0x70, 0x80, 0x03, 0x00, 0x1C, 0xF8, 0x03,
  0x80, 0x03, 0x8E, 0xE3, 0x38, 0x70, 0x38, 0xE0, 0x00, 0x00, 0xF0, 0xFF,
  0x38, 0x70, 0x38, 0x00, 0x38, 0x70, 0xF8, 0xFF, 0xC0, 0x01, 0x78, 0x7C,
  0x38, 0x70, 0x80, 0x03, 0x00, 0x1C, 0xF8, 0x01, 0x80, 0x03, 0x8E, 0xE3,
  0x38, 0x70, 0x38, 0xE0, 0x00, 0x00, 0xF8, 0xE1, 0x38, 0x70, 0x38, 0x00,
  0x38, 0x70, 0x38, 0x00, 0xC0, 0x01, 0xF0, 0x77, 0x38, 0x70, 0x80, 0x03,
  0x00, 0x1C, 0xF8, 0x07, 0x80, 0x03, 0x8E, 0xE3, 0x38, 0x70, 0x38, 0xE0,
  0x00, 0x00, 0x78, 0xE0, 0x38, 0x70, 0x70, 0x00, 0x38, 0x70, 0x38, 0x00,
  0xC0, 0x01, 0xC0, 0x73, 0x38, 0x70, 0x80, 0x03, 0x00, 0x1C, 0x38, 0x0F,
  0x80, 0x03, 0x8E, 0xE3, 0x38, 0x70, 0x78, 0xF0, 0x00, 0x00, 0x38, 0xE0,
  0x38, 0x70, 0x70, 0x60, 0x38, 0x70, 0x78, 0xE0, 0xC0, 0x01, 0x00, 0x38,
  0x38, 0x70, 0x80, 0x03, 0x00, 0x1C, 0x38, 0x1E, 0x80, 0x03, 0x8E, 0xE3,
  0x38, 0x70, 0x70, 0x70, 0x00, 0x00, 0x78, 0xF8, 0xF8, 0x38, 0xE0, 0x71,
  0x78, 0x7C, 0xF0, 0xF0, 0xC0, 0x01, 0x38, 0x3C, 0x38, 0x70, 0x80, 0x03,
  0x60, 0x1E, 0x38, 0x3C, 0x80, 0x03, 0x8E, 0xE3, 0x38, 0x70, 0xF0, 0x78,
  0x00, 0x00, 0xF0, 0xFF, 0xF8, 0x1F, 0xC0, 0x7F, 0xF0, 0x7F, 0xE0, 0xFF,
  0xC0, 0x01, 0xF8, 0x1F, 0x38, 0x70, 0x80, 0x03, 0xE0, 0x0F, 0x38, 0x78,
  0x80, 0x03, 0x8E, 0xE3, 0x38, 0x70, 0xE0, 0x3F, 0x00, 0x00, 0xE0, 0xE7,
  0xB8, 0x0F, 0x00, 0x3F, 0xC0, 0x73, 0x80, 0x3F, 0xC0, 0x01, 0xF8, 0x0F,
  0x38, 0x70, 0x80, 0x03, 0xE0, 0x07, 0x38, 0xF0, 0x80, 0x03, 0x8E, 0xE3,
  0x38, 0x70, 0xC0, 0x1F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0xC0, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x3E, 0x80, 0x03, 0xF8, 0x00, 0xE0, 0xC1, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xC0, 0x01, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3F,
  0x80, 0x03, 0xF8, 0x01, 0xF0, 0xC3, 0x00, 0x00, 0xB8, 0x1F, 0xC0, 0xEF,
  0xE0, 0x3E, 0xC0, 0x1F, 0xC0, 0x01, 0x38, 0x38, 0x38, 0xE0, 0x38, 0xE0,
  0x38, 0xE0, 0x38, 0xE0, 0xF8, 0x7F, 0x80, 0x03, 0x80, 0x03, 0x80, 0x03,
  0x30, 0x67, 0x00, 0x00, 0xF8, 0x3F, 0xE0, 0xFF, 0xE0, 0x3F, 0xF0, 0x7F,
  0xC0, 0x01, 0x38, 0x38, 0x38, 0xE0, 0x38, 0xE0, 0x78, 0xF0, 0x78, 0xF0,
  0xF8, 0x7F, 0xC0, 0x01, 0x80, 0x03, 0x00, 0x07, 0x18, 0x7E, 0x00, 0x00,
  0xF8, 0x78, 0x70, 0xF8, 0xE0, 0x03, 0x78, 0x70, 0xF0, 0x1F, 0x38, 0x38,
  0x38, 0xE0, 0x38, 0xE2, 0x70, 0x70, 0x70, 0x70, 0x00, 0x70, 0xC0, 0x01,
  0x80, 0x03, 0x00, 0x07, 0x18, 0x3C, 0x00, 0x00, 0x38, 0x70, 0x38, 0xE0,
  0xE0, 0x01, 0x38, 0x60, 0xF0, 0x1F, 0x38, 0x38, 0x70, 0x70, 0x38, 0xE7,
  0xE0, 0x38, 0xE0, 0x38, 0x00, 0x78, 0xC0, 0x01, 0x80, 0x03, 0x00, 0x07,
  0x00, 0x00, 0x00, 0x00, 0x38, 0x70, 0x38, 0xE0, 0xE0, 0x00, 0x38, 0x00,
  0xC0, 0x01, 0x38, 0x38, 0x70, 0x70, 0x38, 0xE7, 0xE0, 0x3D, 0xE0, 0x38,
  0x00, 0x3C, 0xF0, 0x00, 0x80, 0x03, 0x00, 0x1E, 0x00, 0x00, 0x00, 0x00,
  0x38, 0x70, 0x38, 0xE0, 0xE0, 0x00, 0xF8, 0x00, 0xC0, 0x01, 0x38, 0x38,
  0xE0, 0x38, 0x38, 0xE7, 0xC0, 0x1F, 0xC0, 0x1D, 0x00, 0x1E, 0x38, 0x00,
  0x80, 0x03, 0x00, 0x38, 0x00, 0x00, 0x00, 0x00, 0xF8, 0x38, 0xF8, 0xF8,
  0xE0, 0x00, 0xF0, 0x0F, 0xC0, 0x01, 0x38, 0x38, 0xE0, 0x38, 0x38, 0xE7,
  0x80, 0x0F, 0xC0, 0x1D, 0x00, 0x0F, 0x38, 0x00, 0x80, 0x03, 0x00, 0x38,
  0x00, 0x00, 0x00, 0x00, 0xF8, 0x1F, 0xF0, 0xFF, 0xE0, 0x00, 0xC0, 0x3F,
  0xC0, 0x01, 0x38, 0x38, 0xC0, 0x18, 0xB8, 0xEF, 0x80, 0x0F, 0x80, 0x0F,
  0x80, 0x07, 0xF0, 0x00, 0x80, 0x03, 0x00, 0x1E, 0x00, 0x00, 0x00, 0x00,
  0xB8, 0x0F, 0xC0, 0xE7, 0xE0, 0x00, 0x00, 0x7C, 0xC0, 0x01, 0x38, 0x38,
  0xC0, 0x1D, 0xB0, 0x6D, 0xC0, 0x1D, 0x80, 0x0F, 0xC0, 0x03, 0xC0, 0x01,
  0x80, 0x03, 0x00, 0x07, 0x00, 0x00, 0x00, 0x00, 0x38, 0x00, 0x00, 0xE0,
  0xE0, 0x00, 0x00, 0x70, 0xC0, 0x01, 0x38, 0x38, 0xC0, 0x1D, 0xB0, 0x6D,
  0xE0, 0x38, 0x80, 0x07, 0xE0, 0x01, 0xC0, 0x01, 0x80, 0x03, 0x00, 0x07,
  0x00, 0x00, 0x00, 0x00, 0x38, 0x00, 0x00, 0xE0, 0xE0, 0x00, 0x18, 0x70,
  0xC0, 0x01, 0x78, 0x3C, 0x80, 0x0D, 0xF0, 0x7D, 0xE0, 0x38, 0xC0, 0x03,
  0xF0, 0x00, 0xC0, 0x01, 0x80, 0x03, 0x00, 0x07, 0x00, 0x00, 0x38, 0xE7,
  0x38, 0x00, 0x00, 0xE0, 0xE0, 0x00, 0x38, 0x38, 0xC0, 0x1B, 0x78, 0x3E,
  0x80, 0x0F, 0xF0, 0x78, 0x70, 0x70, 0xC0, 0x01, 0x78, 0x00, 0x80, 0x03,
  0x80, 0x03, 0x80, 0x03, 0x00, 0x00, 0x38, 0xE7, 0x38, 0x00, 0x00, 0xE0,
  0xE0, 0x00, 0xF8, 0x1F, 0xC0, 0x1F, 0xF0, 0x3F, 0x00, 0x07, 0xE0, 0x38,
  0x78, 0xF0, 0xF0, 0x01, 0xF8, 0x7F, 0x00, 0x3F, 0x80, 0x03, 0xF8, 0x03,
  0x00, 0x00, 0x38, 0xE7, 0x38, 0x00, 0x00, 0xE0, 0xE0, 0x00, 0xE0, 0x0F,
  0x80, 0x1F, 0xE0, 0x3B, 0x00, 0x07, 0xE0, 0x38, 0x38, 0xE0, 0xF0, 0x00,
  0xF8, 0x7F, 0x00, 0x3E, 0x80, 0x03, 0xF8, 0x00, 0x00, 0x00, 0x38, 0xE7,
};
static char normal_font_bits[] = {
  0x00, 0x10, 0x48, 0x48, 0x10, 0x80, 0x1C, 0x20, 0x20, 0x08, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x40, 0x00, 0x10, 0x48, 0x48, 0xF8, 0x4E, 0x22, 0x20,
  0x10, 0x10, 0x10, 0x10, 0x00, 0x00, 0x00, 0x40, 0x00, 0x10, 0x24, 0xFC,
  0x14, 0x2A, 0x22, 0x10, 0x08, 0x20, 0x54, 0x10, 0x00, 0x00, 0x00, 0x20,
  0x00, 0x10, 0x00, 0x28, 0x1C, 0x2E, 0x22, 0x00, 0x08, 0x20, 0x38, 0x10,
  0x00, 0x00, 0x00, 0x20, 0x00, 0x10, 0x00, 0x28, 0x70, 0x10, 0x9C, 0x00,
  0x08, 0x20, 0x54, 0xFE, 0x00, 0x7C, 0x00, 0x10, 0x00, 0x10, 0x00, 0x7E,
  0x90, 0xE8, 0xA2, 0x00, 0x08, 0x20, 0x10, 0x10, 0x00, 0x00, 0x00, 0x10,
  0x00, 0x10, 0x00, 0x24, 0x90, 0xA8, 0x42, 0x00, 0x08, 0x20, 0x00, 0x10,
  0x00, 0x00, 0x00, 0x10, 0x00, 0x00, 0x00, 0x24, 0x7C, 0xE4, 0x42, 0x00,
  0x10, 0x10, 0x00, 0x10, 0x10, 0x00, 0x10, 0x08, 0x00, 0x10, 0x00, 0x00,
  0x10, 0x02, 0xBC, 0x00, 0x20, 0x08, 0x00, 0x00, 0x18, 0x00, 0x10, 0x08,
  0x78, 0x10, 0x78, 0x78, 0x40, 0xF8, 0x70, 0xFC, 0x78, 0x78, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x38, 0x84, 0x1C, 0x84, 0x84, 0x60, 0x08, 0x08, 0x80,
  0x84, 0x84, 0x00, 0x00, 0x80, 0x00, 0x04, 0x44, 0x84, 0x10, 0x84, 0x80,
  0x50, 0x08, 0x04, 0x40, 0x84, 0x84, 0x10, 0x10, 0x60, 0xFE, 0x18, 0x40,
  0x84, 0x10, 0x80, 0x80, 0x48, 0x08, 0x7C, 0x40, 0x84, 0x84, 0x10, 0x10,
  0x18, 0x00, 0x60, 0x20, 0x84, 0x10, 0x40, 0x70, 0x44, 0x78, 0x84, 0x20,
  0x78, 0x84, 0x00, 0x00, 0x04, 0x00, 0x80, 0x10, 0x84, 0x10, 0x30, 0x80,
  0xFC, 0x80, 0x84, 0x20, 0x84, 0xF8, 0x00, 0x00, 0x18, 0xFE, 0x60, 0x10,
  0x84, 0x10, 0x08, 0x80, 0x40, 0x80, 0x84, 0x10, 0x84, 0x80, 0x10, 0x10,
  0x60, 0x00, 0x18, 0x10, 0x84, 0x10, 0x04, 0x84, 0x40, 0x84, 0x84, 0x10,
  0x84, 0x40, 0x10, 0x10, 0x80, 0x00, 0x04, 0x00, 0x78, 0x7C, 0xFC, 0x78,
  0x40, 0x78, 0x78, 0x08, 0x78, 0x38, 0x00, 0x08, 0x00, 0x00, 0x00, 0x10,
  0x38, 0x10, 0x3C, 0x78, 0x3E, 0xFC, 0xFC, 0x78, 0x82, 0x38, 0x38, 0x84,
  0x04, 0xC6, 0x86, 0x38, 0x44, 0x10, 0x44, 0x84, 0x42, 0x04, 0x04, 0x84,
  0x82, 0x10, 0x20, 0x44, 0x04, 0xC6, 0x86, 0x44, 0x82, 0x28, 0x44, 0x02,
  0x82, 0x04, 0x04, 0x02, 0x82, 0x10, 0x20, 0x24, 0x04, 0xAA, 0x8A, 0x82,
  0xBA, 0x28, 0x44, 0x02, 0x82, 0x04, 0x04, 0x02, 0x82, 0x10, 0x20, 0x14,
  0x04, 0xAA, 0x8A, 0x82, 0xB2, 0x44, 0x7C, 0x02, 0x82, 0xFC, 0x7C, 0x02,
  0xFE, 0x10, 0x20, 0x0C, 0x04, 0xAA, 0x92, 0x82, 0xAA, 0x44, 0x84, 0x02,
  0x82, 0x04, 0x04, 0xE2, 0x82, 0x10, 0x20, 0x14, 0x04, 0x92, 0xA2, 0x82,
  0x72, 0x7C, 0x84, 0x02, 0x82, 0x04, 0x04, 0x82, 0x82, 0x10, 0x20, 0x24,
  0x04, 0x92, 0xA2, 0x82, 0x04, 0x82, 0x84, 0x84, 0x42, 0x04, 0x04, 0x84,
  0x82, 0x10, 0x20, 0x44, 0x04, 0x92, 0xC2, 0x44, 0xF8, 0x82, 0x7C, 0x78,
  0x3E, 0xFC, 0x04, 0xF8, 0x82, 0x38, 0x1C, 0x84, 0xFC, 0x82, 0xC2, 0x38,
  0x7C, 0x38, 0x3E, 0x7C, 0xFE, 0x82, 0x82, 0x82, 0x82, 0x82, 0xFE, 0x38,
  0x08, 0x38, 0x10, 0x00, 0x84, 0x44, 0x42, 0x82, 0x10, 0x82, 0x82, 0x92,
  0x82, 0x44, 0x80, 0x08, 0x08, 0x20, 0x28, 0x00, 0x84, 0x82, 0x42, 0x02,
  0x10, 0x82, 0x82, 0x92, 0x44, 0x44, 0x40, 0x08, 0x10, 0x20, 0x44, 0x00,
  0x84, 0x82, 0x42, 0x02, 0x10, 0x82, 0x44, 0x92, 0x28, 0x28, 0x20, 0x08,
  0x10, 0x20, 0x82, 0x00, 0x84, 0x82, 0x22, 0x7C, 0x10, 0x82, 0x44, 0xAA,
  0x10, 0x28, 0x10, 0x08, 0x20, 0x20, 0x00, 0x00, 0x7C, 0x92, 0x1E, 0x80,
  0x10, 0x82, 0x28, 0xAA, 0x28, 0x10, 0x08, 0x08, 0x20, 0x20, 0x00, 0x00,
  0x04, 0x64, 0x22, 0x80, 0x10, 0x82, 0x28, 0xAA, 0x44, 0x10, 0x04, 0x08,
  0x20, 0x20, 0x00, 0x00, 0x04, 0x78, 0x42, 0x82, 0x10, 0x44, 0x10, 0x44,
  0x82, 0x10, 0x02, 0x08, 0x40, 0x20, 0x00, 0x00, 0x04, 0xC0, 0x82, 0x7C,
  0x10, 0x38, 0x10, 0x44, 0x82, 0x10, 0xFE, 0x38, 0x40, 0x38, 0x00, 0xFE,
  0x10, 0x00, 0x04, 0x00, 0x80, 0x00, 0x70, 0x00, 0x04, 0x00, 0x00, 0x04,
  0x10, 0x00, 0x00, 0x00, 0x10, 0x00, 0x04, 0x00, 0x80, 0x00, 0x08, 0x00,
  0x04, 0x10, 0x20, 0x04, 0x10, 0x00, 0x00, 0x00, 0x20, 0x78, 0x04, 0x78,
  0x80, 0x78, 0x08, 0xF8, 0x04, 0x00, 0x00, 0x44, 0x10, 0x4A, 0x74, 0x78,
  0x00, 0x80, 0x74, 0x84, 0xF8, 0x84, 0x3C, 0x84, 0x74, 0x10, 0x30, 0x24,
  0x10, 0xB6, 0x8C, 0x84, 0x00, 0x80, 0x8C, 0x04, 0x84, 0x84, 0x08, 0x84,
  0x8C, 0x10, 0x20, 0x14, 0x10, 0x92, 0x84, 0x84, 0x00, 0xF8, 0x84, 0x04,
  0x84, 0xFC, 0x08, 0xC4, 0x84, 0x10, 0x20, 0x0C, 0x10, 0x92, 0x84, 0x84,
  0x00, 0x84, 0x84, 0x04, 0x84, 0x04, 0x08, 0xB8, 0x84, 0x10, 0x20, 0x14,
  0x10, 0x92, 0x84, 0x84, 0x00, 0x84, 0x84, 0x84, 0xC4, 0x84, 0x08, 0x80,
  0x84, 0x10, 0x20, 0x24, 0x10, 0x92, 0x84, 0x84, 0x00, 0xF8, 0x7C, 0x78,
  0xB8, 0x78, 0x08, 0x78, 0x84, 0x10, 0x1C, 0x44, 0x10, 0x92, 0x84, 0x78,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x20,
  0x10, 0x08, 0x4C, 0x00, 0x00, 0x00, 0x00, 0x00, 0x08, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x10, 0x10, 0x10, 0x32, 0x00, 0x74, 0xF8, 0x68, 0x78,
  0x3C, 0x84, 0x84, 0x92, 0x44, 0x84, 0x7C, 0x10, 0x10, 0x10, 0x00, 0x00,
  0x8C, 0x84, 0x18, 0x04, 0x08, 0x84, 0x84, 0x92, 0x44, 0x48, 0x40, 0x10,
  0x10, 0x10, 0x00, 0x00, 0x84, 0xC4, 0x08, 0x04, 0x08, 0x84, 0x48, 0xAA,
  0x28, 0x48, 0x20, 0x08, 0x10, 0x20, 0x00, 0x00, 0x7C, 0xB8, 0x08, 0x38,
  0x08, 0x84, 0x48, 0xAA, 0x10, 0x30, 0x10, 0x10, 0x10, 0x10, 0x00, 0x00,
  0x04, 0x80, 0x08, 0x40, 0x08, 0x84, 0x48, 0xAA, 0x28, 0x30, 0x08, 0x10,
  0x10, 0x10, 0x00, 0x00, 0x04, 0x80, 0x08, 0x40, 0x08, 0xC4, 0x30, 0x44,
  0x44, 0x10, 0x04, 0x10, 0x10, 0x10, 0x00, 0x92, 0x04, 0x80, 0x08, 0x3C,
  0x30, 0xB8, 0x30, 0x44, 0x44, 0x08, 0x7C, 0x20, 0x10, 0x08, 0x00, 0x92,
};
static char small_font_bits[] = {
  0x00, 0x18, 0x6C, 0x50, 0x20, 0x00, 0x1C, 0x30, 0x60, 0x18, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x60, 0x00, 0x18, 0x6C, 0x50, 0x78, 0x8E, 0x36, 0x30,
  0x30, 0x30, 0x10, 0x10, 0x00, 0x00, 0x00, 0x60, 0x00, 0x18, 0x24, 0xFC,
  0x2C, 0x4A, 0x36, 0x10, 0x18, 0x60, 0x54, 0x10, 0x00, 0x00, 0x00, 0x30,
  0x00, 0x18, 0x00, 0x28, 0x78, 0x2E, 0x9C, 0x00, 0x18, 0x60, 0x38, 0x10,
  0x00, 0x00, 0x00, 0x30, 0x00, 0x18, 0x00, 0x28, 0xD0, 0x10, 0xB6, 0x00,
  0x18, 0x60, 0x54, 0xFE, 0x00, 0x7C, 0x00, 0x18, 0x00, 0x18, 0x00, 0x7E,
  0xD4, 0xE8, 0x66, 0x00, 0x18, 0x60, 0x10, 0x10, 0x00, 0x00, 0x00, 0x18,
  0x00, 0x00, 0x00, 0x14, 0x78, 0xA4, 0xC6, 0x00, 0x30, 0x30, 0x00, 0x10,
  0x60, 0x00, 0x18, 0x0C, 0x00, 0x18, 0x00, 0x14, 0x10, 0xE2, 0xBC, 0x00,
  0x60, 0x18, 0x00, 0x10, 0x70, 0x00, 0x18, 0x0C, 0x7C, 0x30, 0x7C, 0x7C,
  0x60, 0xFC, 0x78, 0xFE, 0x7C, 0x7C, 0x00, 0x00, 0x00, 0x00, 0x00, 0x38,
  0xC6, 0x3C, 0xC6, 0xC6, 0x70, 0x0C, 0x0C, 0xC0, 0xC6, 0xC6, 0x30, 0x30,
  0x60, 0x00, 0x0C, 0x64, 0xC6, 0x30, 0xC6, 0xC6, 0x68, 0x0C, 0x06, 0x60,
  0xC6, 0xC6, 0x30, 0x30, 0x18, 0xFE, 0x30, 0x60, 0xC6, 0x30, 0x60, 0x30,
  0x64, 0x7C, 0x7E, 0x60, 0x7C, 0xC6, 0x00, 0x00, 0x06, 0x00, 0xC0, 0x30,
  0xC6, 0x30, 0x30, 0xC0, 0x62, 0xC0, 0xC6, 0x30, 0xC6, 0xFC, 0x00, 0x00,
  0x06, 0x00, 0xC0, 0x18, 0xC6, 0x30, 0x18, 0xC6, 0xFE, 0xC6, 0xC6, 0x30,
  0xC6, 0xC0, 0x30, 0x30, 0x18, 0xFE, 0x30, 0x18, 0xC6, 0x30, 0x0C, 0xC6,
  0x60, 0xC6, 0xC6, 0x18, 0xC6, 0x60, 0x30, 0x30, 0x60, 0x00, 0x0C, 0x00,
  0x7C, 0xFC, 0xFE, 0x7C, 0x60, 0x7C, 0x7C, 0x18, 0x7C, 0x3C, 0x00, 0x10,
  0x00, 0x00, 0x00, 0x18, 0x78, 0x18, 0x3E, 0x78, 0x3E, 0xFE, 0xFE, 0x78,
  0xC6, 0x78, 0x7C, 0xC6, 0x06, 0xC6, 0x66, 0x38, 0x84, 0x18, 0x66, 0xCC,
  0x66, 0x06, 0x06, 0xCC, 0xC6, 0x30, 0x60, 0x66, 0x06, 0xEE, 0x6E, 0x6C,
  0xB2, 0x3C, 0x66, 0xC6, 0xC6, 0x06, 0x06, 0xC6, 0xC6, 0x30, 0x60, 0x36,
  0x06, 0xEE, 0x6E, 0xC6, 0xAA, 0x24, 0x7E, 0x06, 0xC6, 0xFE, 0xFE, 0x06,
  0xC6, 0x30, 0x60, 0x1E, 0x06, 0xEE, 0x7E, 0xC6, 0xAA, 0x66, 0xC6, 0x06,
  0xC6, 0x06, 0x06, 0xE6, 0xFE, 0x30, 0x60, 0x36, 0x06, 0xD6, 0x76, 0xC6,
  0x72, 0x7E, 0xC6, 0xC6, 0xC6, 0x06, 0x06, 0xC6, 0xC6, 0x30, 0x60, 0x66,
  0x06, 0xD6, 0x76, 0xC6, 0x04, 0x66, 0xC6, 0xCC, 0x66, 0x06, 0x06, 0xCC,
  0xC6, 0x30, 0x60, 0xC6, 0x06, 0xD6, 0x66, 0x6C, 0x78, 0x66, 0x7E, 0x78,
  0x3E, 0xFE, 0x06, 0xF8, 0xC6, 0x78, 0x3E, 0x86, 0xFE, 0xC6, 0x66, 0x38,
  0x7E, 0x18, 0x7E, 0x7C, 0xFC, 0xC6, 0xC6, 0xC6, 0x66, 0x66, 0xFE, 0x78,
  0x0C, 0x78, 0x30, 0x00, 0xC6, 0x3C, 0xC6, 0xC6, 0x30, 0xC6, 0xC6, 0xC6,
  0x66, 0x66, 0x60, 0x18, 0x0C, 0x60, 0x78, 0x00, 0xC6, 0x66, 0xC6, 0x0E,
  0x30, 0xC6, 0x6C, 0xD6, 0x3C, 0x24, 0x30, 0x18, 0x18, 0x60, 0xCC, 0x00,
  0xC6, 0x66, 0x7E, 0x7C, 0x30, 0xC6, 0x6C, 0xD6, 0x18, 0x3C, 0x30, 0x18,
  0x18, 0x60, 0x00, 0x00, 0x7E, 0x66, 0x36, 0xE0, 0x30, 0xC6, 0x38, 0xD6,
  0x18, 0x18, 0x18, 0x18, 0x30, 0x60, 0x00, 0x00, 0x06, 0x76, 0x66, 0xC6,
  0x30, 0xC6, 0x38, 0x7C, 0x3C, 0x18, 0x18, 0x18, 0x30, 0x60, 0x00, 0x00,
  0x06, 0x3C, 0xC6, 0xC6, 0x30, 0xC6, 0x10, 0x7C, 0x66, 0x18, 0x0C, 0x18,
  0x60, 0x60, 0x00, 0x00, 0x06, 0xD8, 0x86, 0x7C, 0x30, 0x7C, 0x10, 0x6C,
  0x66, 0x18, 0xFE, 0x78, 0x60, 0x78, 0x00, 0xFE, 0x30, 0x00, 0x06, 0x00,
  0xC0, 0x00, 0x70, 0x00, 0x06, 0x18, 0x18, 0x06, 0x18, 0x00, 0x00, 0x00,
  0x30, 0x7C, 0x06, 0x7C, 0xC0, 0x7C, 0x18, 0xFC, 0x06, 0x18, 0x18, 0xC6,
  0x18, 0xEE, 0x76, 0x7C, 0x20, 0xC0, 0x76, 0xC6, 0xFC, 0xC6, 0x18, 0xC6,
  0x76, 0x00, 0x00, 0x66, 0x18, 0xFE, 0xCE, 0xC6, 0x00, 0xFC, 0xCE, 0x06,
  0xC6, 0xC6, 0x7C, 0xC6, 0xCE, 0x18, 0x1C, 0x36, 0x18, 0xD6, 0xC6, 0xC6,
  0x00, 0xC6, 0xC6, 0x06, 0xC6, 0xFE, 0x18, 0xE6, 0xC6, 0x18, 0x18, 0x1E,
  0x18, 0xD6, 0xC6, 0xC6, 0x00, 0xC6, 0xC6, 0x06, 0xC6, 0x06, 0x18, 0xDC,
  0xC6, 0x18, 0x18, 0x36, 0x18, 0xD6, 0xC6, 0xC6, 0x00, 0xC6, 0xC6, 0xC6,
  0xE6, 0xC6, 0x18, 0xC0, 0xC6, 0x18, 0x18, 0x66, 0x18, 0xD6, 0xC6, 0xC6,
  0x00, 0xFC, 0x7E, 0x7C, 0xDC, 0x7C, 0x18, 0x7C, 0xC6, 0x18, 0x0E, 0xC6,
  0x18, 0xD6, 0xC6, 0x7C, 0x00, 0x00, 0x00, 0x00, 0x18, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x70, 0x30, 0x38, 0x98, 0x00, 0x76, 0xFC, 0x6C, 0xF8,
  0x7C, 0xC6, 0xC6, 0xC6, 0xC6, 0xC6, 0xFC, 0x18, 0x30, 0x60, 0xFC, 0x00,
  0xCE, 0xC6, 0x7C, 0x0C, 0x18, 0xC6, 0xC6, 0xD6, 0xC6, 0xC6, 0xC0, 0x18,
  0x30, 0x60, 0x64, 0x00, 0xC6, 0xE6, 0x0C, 0x1C, 0x18, 0xC6, 0xC6, 0xD6,
  0x6C, 0x6C, 0x60, 0x30, 0x30, 0x30, 0x00, 0x00, 0x7E, 0xDC, 0x0C, 0x78,
  0x18, 0xC6, 0x6C, 0xD6, 0x38, 0x6C, 0x30, 0x30, 0x30, 0x30, 0x00, 0x00,
  0x06, 0xC0, 0x0C, 0xE0, 0x18, 0xC6, 0x6C, 0x7C, 0x6C, 0x38, 0x18, 0x18,
  0x30, 0x60, 0x00, 0x00, 0x06, 0xC0, 0x0C, 0xC0, 0x18, 0xE6, 0x38, 0x6C,
  0xC6, 0x30, 0x0C, 0x18, 0x30, 0x60, 0x00, 0x92, 0x06, 0xC0, 0x0C, 0x7C,
  0x70, 0xDC, 0x38, 0x6C, 0xC6, 0x1C, 0xFC, 0x70, 0x30, 0x38, 0x00, 0x92,
};
static char tiny_font_bits[] = {
  0x00, 0x02, 0x0A, 0x0A, 0x04, 0x00, 0x06, 0x04, 0x04, 0x01, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0x0A, 0x0F, 0x0E, 0x0A, 0x09, 0x04,
  0x02, 0x02, 0x02, 0x00, 0x00, 0x00, 0x00, 0x08, 0x00, 0x02, 0x00, 0x0A,
  0x02, 0x08, 0x09, 0x02, 0x01, 0x04, 0x07, 0x04, 0x00, 0x00, 0x00, 0x08,
  0x00, 0x02, 0x00, 0x0F, 0x0E, 0x04, 0x06, 0x00, 0x01, 0x04, 0x02, 0x0E,
  0x00, 0x0F, 0x00, 0x04, 0x00, 0x02, 0x00, 0x0A, 0x08, 0x04, 0x09, 0x00,
  0x01, 0x04, 0x00, 0x04, 0x00, 0x00, 0x00, 0x04, 0x00, 0x00, 0x00, 0x00,
  0x0E, 0x02, 0x05, 0x00, 0x02, 0x02, 0x00, 0x00, 0x04, 0x00, 0x04, 0x02,
  0x00, 0x02, 0x00, 0x00, 0x04, 0x0A, 0x0A, 0x00, 0x04, 0x01, 0x00, 0x00,
  0x06, 0x00, 0x04, 0x02, 0x06, 0x04, 0x06, 0x06, 0x04, 0x0E, 0x06, 0x0F,
  0x06, 0x06, 0x00, 0x00, 0x00, 0x00, 0x00, 0x06, 0x09, 0x06, 0x09, 0x09,
  0x06, 0x02, 0x09, 0x08, 0x09, 0x09, 0x00, 0x00, 0x00, 0x00, 0x00, 0x09,
  0x09, 0x05, 0x08, 0x08, 0x05, 0x07, 0x01, 0x04, 0x09, 0x09, 0x00, 0x00,
  0x04, 0x00, 0x01, 0x08, 0x09, 0x04, 0x04, 0x06, 0x0F, 0x09, 0x07, 0x04,
  0x06, 0x0E, 0x04, 0x04, 0x02, 0x07, 0x02, 0x04, 0x09, 0x04, 0x02, 0x08,
  0x04, 0x08, 0x09, 0x02, 0x09, 0x08, 0x00, 0x00, 0x01, 0x00, 0x04, 0x04,
  0x09, 0x04, 0x01, 0x09, 0x04, 0x09, 0x09, 0x02, 0x09, 0x09, 0x04, 0x04,
  0x02, 0x07, 0x02, 0x00, 0x06, 0x04, 0x0F, 0x06, 0x04, 0x06, 0x06, 0x02,
  0x06, 0x06, 0x00, 0x02, 0x04, 0x00, 0x01, 0x04, 0x00, 0x06, 0x07, 0x06,
  0x07, 0x0F, 0x0F, 0x06, 0x09, 0x0E, 0x07, 0x09, 0x01, 0x1B, 0x09, 0x06,
  0x0E, 0x09, 0x09, 0x09, 0x09, 0x01, 0x01, 0x01, 0x09, 0x04, 0x04, 0x09,
  0x01, 0x15, 0x0B, 0x09, 0x09, 0x09, 0x09, 0x01, 0x09, 0x01, 0x01, 0x01,
  0x09, 0x04, 0x04, 0x05, 0x01, 0x15, 0x0B, 0x09, 0x0D, 0x0F, 0x07, 0x01,
  0x09, 0x0F, 0x03, 0x0D, 0x0F, 0x04, 0x04, 0x03, 0x01, 0x15, 0x0D, 0x09,
  0x05, 0x09, 0x09, 0x01, 0x09, 0x01, 0x01, 0x09, 0x09, 0x04, 0x04, 0x05,
  0x01, 0x11, 0x0D, 0x09, 0x01, 0x09, 0x09, 0x09, 0x09, 0x01, 0x01, 0x09,
  0x09, 0x04, 0x04, 0x09, 0x01, 0x11, 0x09, 0x09, 0x0E, 0x09, 0x07, 0x06,
  0x07, 0x0F, 0x01, 0x06, 0x09, 0x0E, 0x03, 0x09, 0x0F, 0x11, 0x09, 0x06,
  0x07, 0x06, 0x07, 0x06, 0x07, 0x09, 0x09, 0x11, 0x09, 0x09, 0x0F, 0x0E,
  0x00, 0x0E, 0x04, 0x00, 0x09, 0x09, 0x09, 0x09, 0x02, 0x09, 0x09, 0x11,
  0x09, 0x09, 0x08, 0x02, 0x02, 0x08, 0x0A, 0x00, 0x09, 0x09, 0x09, 0x01,
  0x02, 0x09, 0x09, 0x11, 0x06, 0x09, 0x04, 0x02, 0x02, 0x08, 0x00, 0x00,
  0x09, 0x0B, 0x09, 0x06, 0x02, 0x09, 0x0A, 0x11, 0x06, 0x06, 0x04, 0x02,
  0x04, 0x08, 0x00, 0x00, 0x07, 0x05, 0x07, 0x08, 0x02, 0x09, 0x0A, 0x15,
  0x06, 0x02, 0x02, 0x02, 0x04, 0x08, 0x00, 0x00, 0x01, 0x09, 0x05, 0x09,
  0x02, 0x0D, 0x04, 0x15, 0x09, 0x02, 0x01, 0x02, 0x08, 0x08, 0x00, 0x00,
  0x01, 0x06, 0x09, 0x06, 0x02, 0x0A, 0x04, 0x1B, 0x09, 0x02, 0x0F, 0x0E,
  0x08, 0x0E, 0x00, 0x0F, 0x04, 0x00, 0x01, 0x00, 0x08, 0x00, 0x0C, 0x00,
  0x01, 0x00, 0x08, 0x01, 0x04, 0x00, 0x00, 0x00, 0x02, 0x00, 0x01, 0x00,
  0x08, 0x00, 0x02, 0x0E, 0x01, 0x04, 0x00, 0x01, 0x04, 0x00, 0x00, 0x00,
  0x00, 0x0E, 0x01, 0x06, 0x08, 0x06, 0x02, 0x09, 0x01, 0x00, 0x0C, 0x01,
  0x04, 0x0B, 0x07, 0x06, 0x00, 0x09, 0x07, 0x09, 0x0E, 0x09, 0x07, 0x09,
  0x07, 0x04, 0x08, 0x09, 0x04, 0x15, 0x09, 0x09, 0x00, 0x09, 0x09, 0x01,
  0x09, 0x0F, 0x02, 0x0E, 0x09, 0x04, 0x08, 0x05, 0x04, 0x15, 0x09, 0x09,
  0x00, 0x0D, 0x09, 0x09, 0x0D, 0x01, 0x02, 0x08, 0x09, 0x04, 0x09, 0x03,
  0x04, 0x15, 0x09, 0x09, 0x00, 0x0A, 0x07, 0x06, 0x0A, 0x06, 0x02, 0x06,
  0x09, 0x04, 0x06, 0x0D, 0x0C, 0x15, 0x09, 0x06, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x08, 0x04, 0x02, 0x14, 0x00,
  0x07, 0x0E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x04,
  0x04, 0x04, 0x0A, 0x00, 0x09, 0x09, 0x05, 0x0E, 0x02, 0x09, 0x11, 0x15,
  0x11, 0x09, 0x0F, 0x04, 0x04, 0x04, 0x00, 0x00, 0x09, 0x09, 0x0B, 0x01,
  0x0F, 0x09, 0x11, 0x15, 0x0A, 0x09, 0x08, 0x02, 0x04, 0x08, 0x00, 0x00,
  0x07, 0x0E, 0x01, 0x06, 0x02, 0x09, 0x0A, 0x15, 0x04, 0x0E, 0x06, 0x04,
  0x04, 0x04, 0x00, 0x00, 0x01, 0x08, 0x01, 0x08, 0x02, 0x09, 0x0A, 0x15,
  0x0A, 0x08, 0x01, 0x04, 0x04, 0x04, 0x00, 0x00, 0x01, 0x08, 0x01, 0x07,
  0x0C, 0x0E, 0x04, 0x0A, 0x11, 0x06, 0x0F, 0x08, 0x04, 0x02, 0x00, 0x05,
};
int32_t __fbfd, __vtfd;
uint32_t* __fbp = NULL;
void ev3_init_lcd() {
	__fbfd = open("/dev/fb0", O_RDWR);
	__fbp = (uint32_t*)mmap(0, EV3_SY_LCD, PROT_READ | PROT_WRITE, MAP_SHARED, __fbfd, 0);
	__vtfd = open("/dev/tty", O_RDONLY);
	ioctl(__vtfd, KDSETMODE, KD_GRAPHICS);
}
void ev3_clear_lcd() {
	memset(__fbp, 255, EV3_SY_LCD);
}
void ev3_text_lcd_large(int32_t x, int32_t y, const char* text) {
	int32_t i;
	for (i = 0; text[i]; i++) {
		if (text[i] < ' ' || text[i] > 127) continue;
		int32_t c_x = ((text[i] - ' ') % 16) * LARGE_LETTER_WIDTH;
		int32_t c_y = ((text[i] - ' ') / 16) * LARGE_LETTER_HEIGHT;
		int32_t a;
		for (a = 0; a < LARGE_LETTER_WIDTH; a++) {
			int32_t X = x + i * LARGE_LETTER_WIDTH + a;
			if (X < 0) continue;
			if (X >= (int32_t)EV3_X_LCD) return;
			int32_t b;
			for (b = 0; b < LARGE_LETTER_HEIGHT; b++) {
				int32_t Y = y + b;
				if (Y < 0) continue;
				if (Y >= (int32_t)EV3_Y_LCD) break;
				if (LARGE_FONT_PIXEL(c_x + a, c_y + b)) EV3_PIXEL_SET(X, Y);
			}
		}
	}
}
void ev3_text_lcd_normal(int32_t x, int32_t y, const char* text) {
	int32_t i;
	for (i = 0; text[i]; i++) {
		if (text[i] < ' ' || text[i] > 127) continue;
		int32_t c_x = ((text[i] - ' ') % 16) * NORMAL_LETTER_WIDTH;
		int32_t c_y = ((text[i] - ' ') / 16) * NORMAL_LETTER_HEIGHT;
		int32_t a;
		for (a = 0; a < NORMAL_LETTER_WIDTH; a++) {
			int32_t X = x + i * NORMAL_LETTER_WIDTH + a;
			if (X < 0) continue;
			if (X >= (int32_t)EV3_X_LCD) return;
			int32_t b;
			for (b = 0; b < NORMAL_LETTER_HEIGHT; b++) {
				int32_t Y = y + b;
				if (Y < 0) continue;
				if (Y >= (int32_t)EV3_Y_LCD) break;
				if (NORMAL_FONT_PIXEL(c_x + a, c_y + b)) EV3_PIXEL_SET(X, Y);
			}
		}
	}
}
void ev3_text_lcd_small(int32_t x, int32_t y, const char* text) {
	int32_t i;
	for (i = 0; text[i]; i++) {
		if (text[i] < ' ' || text[i] > 127) continue;
		int32_t c_x = ((text[i] - ' ') % 16) * SMALL_LETTER_WIDTH;
		int32_t c_y = ((text[i] - ' ') / 16) * SMALL_LETTER_HEIGHT;
		int32_t a;
		for (a = 0; a < SMALL_LETTER_WIDTH; a++) {
			int32_t X = x + i * SMALL_LETTER_WIDTH + a;
			if (X < 0) continue;
			if (X >= (int32_t)EV3_X_LCD) return;
			int32_t b;
			for (b = 0; b < SMALL_LETTER_HEIGHT; b++) {
				int32_t Y = y + b;
				if (Y < 0) continue;
				if (Y >= (int32_t)EV3_Y_LCD) break;
				if (SMALL_FONT_PIXEL(c_x + a, c_y + b)) EV3_PIXEL_SET(X, Y);
			}
		}
	}
}
void ev3_text_lcd_tiny(int32_t x, int32_t y, const char* text) {
	int32_t i;
	for (i = 0; text[i]; i++) {
		if (text[i] < ' ' || text[i] > 127) continue;
		int32_t c_x = ((text[i] - ' ') % 16) * TINY_FONT_WIDTH;
		int32_t c_y = ((text[i] - ' ') / 16) * TINY_LETTER_HEIGHT;
		int32_t a;
		for (a = 0; a < TINY_LETTER_WIDTH; a++) {
			int32_t X = x + i * TINY_LETTER_WIDTH + a;
			if (X < 0) continue;
			if (X >= (int32_t)EV3_X_LCD) return;
			int32_t b;
			for (b = 0; b < TINY_LETTER_HEIGHT; b++) {
				int32_t Y = y + b;
				if (Y < 0) continue;
				if (Y >= (int32_t)EV3_Y_LCD) break;
				if (TINY_FONT_PIXEL(c_x + a, c_y + b)) EV3_PIXEL_SET(X, Y);
			}
		}
	}
}
void ev3_rectangle_lcd(int32_t x, int32_t y, int32_t w, int32_t h, char black) {
	int32_t a, b;
	int32_t minx = x;
	int32_t miny = y;
	int32_t maxx = x+w;
	int32_t maxy = y+h;
	if (minx >= (int32_t)EV3_X_LCD) return;
	if (miny >= (int32_t)EV3_Y_LCD) return;
	if (maxx < 0) return;
	if (maxy < 0) return;
	if (minx < 0) minx = 0;
	if (miny < 0) miny = 0;
	if (maxx >= EV3_X_LCD) maxx = EV3_X_LCD-1;
	if (maxy >= EV3_Y_LCD) maxy = EV3_Y_LCD-1;
	if (black == 1) {
		for (a = minx; a <= maxx; a++)
			for (b = miny; b <= maxy; b++)
				EV3_PIXEL_SET(a, b);
	} else {
		for (a = minx; a <= maxx; a++)
			for (b = miny; b <= maxy; b++)
				EV3_PIXEL_UNSET(a, b);
	}
}
void ev3_rectangle_lcd_out(int32_t x, int32_t y, int32_t w, int32_t h) {
	int32_t a;
	int32_t minx = x;
	int32_t miny = y;
	int32_t maxx = x+w;
	int32_t maxy = y+h;
	if (minx >= (int32_t)EV3_X_LCD) return;
	if (miny >= (int32_t)EV3_Y_LCD) return;
	if (maxx < 0) return;
	if (maxy < 0) return;
	if (minx < 0) minx = 0;
	if (miny < 0) miny = 0;
	if (maxx >= EV3_X_LCD) maxx = EV3_X_LCD-1;
	if (maxy >= EV3_Y_LCD) maxy = EV3_Y_LCD-1;
	if (y == miny)
		for (a = minx; a <= maxx; a++)
			EV3_PIXEL_SET(a, miny);
	if (y+h == maxy)
		for (a = minx; a <= maxx; a++)
			EV3_PIXEL_SET(a, maxy);
	if (x == minx)
		for (a = miny+1; a <= maxy-1; a++)
			EV3_PIXEL_SET(minx, a);
	if (x+w == maxx)
		for (a = miny+1; a <= maxy-1; a++)
			EV3_PIXEL_SET(maxx, a);
}
void ev3_circle_lcd(int32_t x, int32_t y, int32_t r, char black) {
	int32_t a, b;
	int32_t minx = x-r;
	int32_t miny = y-r;
	int32_t maxx = x+r;
	int32_t maxy = y+r;
	if (minx >= (int32_t)EV3_X_LCD) return;
	if (miny >= (int32_t)EV3_Y_LCD) return;
	if (maxx < 0) return;
	if (maxy < 0) return;
	if (minx < 0) minx = 0;
	if (miny < 0) miny = 0;
	if (maxx >= EV3_X_LCD) maxx = EV3_X_LCD-1;
	if (maxy >= EV3_Y_LCD) maxy = EV3_Y_LCD-1;
	if (black == 1) {
		for (a = minx; a <= maxx; a++)
			for (b = miny; b <= maxy; b++) {
				if ((a-x)*(a-x) + (b-y)*(b-y) >= r*r) continue;
				EV3_PIXEL_SET(a, b);
			}
	} else {
		for (a = minx; a <= maxx; a++)
			for (b = miny; b <= maxy; b++) {
				if ((a-x)*(a-x) + (b-y)*(b-y) >= r*r) continue;
				EV3_PIXEL_UNSET(a, b);
			}
	}
}
void ev3_circle_lcd_out(int32_t x, int32_t y, int32_t r) {
	int32_t a, b;
	a = r;
	for (b = 0; b <= r; b++) {
		int once = 0;
		while (a*a + b*b >= r*r) {
			once = 1;
			a--;
			MIRROR_PIXEL_SET(a, b)
			if (a == 0) break;
		}
		if (!once) MIRROR_PIXEL_SET(a, b)
	}
}
void ev3_ellipse_lcd(int32_t x, int32_t y, int32_t rx, int32_t ry, char black) {
	int32_t a, b;
	int32_t minx = x-rx;
	int32_t miny = y-ry;
	int32_t maxx = x+rx;
	int32_t maxy = y+ry;
	if (minx >= (int32_t)EV3_X_LCD) return;
	if (miny >= (int32_t)EV3_Y_LCD) return;
	if (maxx < 0) return;
	if (maxy < 0) return;
	if (minx < 0) minx = 0;
	if (miny < 0) miny = 0;
	if (maxx >= EV3_X_LCD) maxx = EV3_X_LCD-1;
	if (maxy >= EV3_Y_LCD) maxy = EV3_Y_LCD-1;
	if (black == 1) {
		for (a = minx; a <= maxx; a++)
			for (b = miny; b <= maxy; b++) {
				if ((a-x)*(a-x)*ry*ry + (b-y)*(b-y)*rx*rx >= rx*rx*ry*ry) continue;
				EV3_PIXEL_SET(a, b);
			}
	} else {
		for (a = minx; a <= maxx; a++)
			for (b = miny; b <= maxy; b++) {
				if ((a-x)*(a-x)*ry*ry + (b-y)*(b-y)*rx*rx >= rx*rx*ry*ry) continue;
				EV3_PIXEL_UNSET(a, b);
			}
	}
}
void ev3_ellipse_lcd_out(int32_t x, int32_t y, int32_t rx, int32_t ry) {
	int32_t a, b;
	a = rx;
	for (b = 0; b <= ry; b++) {
		int once = 0;
		while (a*a*ry*ry + b*b*rx*rx >= rx*rx*ry*ry) {
			once = 1;
			a--;
			MIRROR_PIXEL_SET(a, b)
			if (a == 0) break;
		}
		if (!once) MIRROR_PIXEL_SET(a, b)
	}
}
void ev3_line_lcd(int32_t x0, int32_t y0, int32_t x1, int32_t y1) {
	int32_t dx =  abs(x1-x0), sx = x0<x1 ? 1 : -1;
	int32_t dy = -abs(y1-y0), sy = y0<y1 ? 1 : -1;
	int32_t err = dx+dy, e2;
	for(;;) {
		if (x0 >= 0 && x0 < (int32_t)EV3_X_LCD && y0 >= 0 && y0 < (int32_t)EV3_Y_LCD) EV3_PIXEL(x0, y0, 1);
		if (x0==x1 && y0==y1) break;
		e2 = 2*err;
		if (e2 > dy) { err += dy; x0 += sx; }
		if (e2 < dx) { err += dx; y0 += sy; }
	}
}
void ev3_quit_lcd() {
	munmap(__fbp, EV3_SY_LCD);
    close(__fbfd);
	ioctl(__vtfd, KDSETMODE, KD_TEXT);
	close(__vtfd);
}
int32_t __ev3_button_fd = -1;
void ev3_init_button() {
	__ev3_button_fd = open("/dev/input/by-path/platform-gpio_keys-event", O_RDONLY);
}
int32_t ev3_button_pressed(enum ev3_button_identifier button) {
	uint8_t keys[(KEY_MAX + 7) / 8];
	lseek(__ev3_button_fd, 0, SEEK_SET);
	ioctl (__ev3_button_fd, EVIOCGKEY(sizeof keys), &keys);
	switch (button) {
		case BUTTON_LEFT:
			return keys[KEY_LEFT >> 3] & (1 << (KEY_LEFT & 7))?1:0;
		case BUTTON_UP:
			return keys[KEY_UP >> 3] & (1 << (KEY_UP & 7))?1:0;
		case BUTTON_RIGHT:
			return keys[KEY_RIGHT >> 3] & (1 << (KEY_RIGHT & 7))?1:0;
		case BUTTON_DOWN:
			return keys[KEY_DOWN >> 3] & (1 << (KEY_DOWN & 7))?1:0;
		case BUTTON_CENTER:
			return keys[KEY_ENTER >> 3] & (1 << (KEY_ENTER & 7))?1:0;
		case BUTTON_BACK:
			return keys[KEY_BACKSPACE >> 3] & (1 << (KEY_BACKSPACE & 7))?1:0;
	}
	return 0;
}
void ev3_quit_button() {
	close(__ev3_button_fd);
}
int32_t __ev3_led_fd[4] = {-1, -1, -1, -1};
void ev3_init_led() {
	ev3_write_file("/sys/class/leds/led0:green:brick-status/trigger", "none", 4);
	ev3_write_file("/sys/class/leds/led0:red:brick-status/trigger", "none", 4);
	ev3_write_file("/sys/class/leds/led1:green:brick-status/trigger", "none", 4);
	ev3_write_file("/sys/class/leds/led1:red:brick-status/trigger", "none", 4);
	__ev3_led_fd[0] = open("/sys/class/leds/led0:green:brick-status/brightness", O_RDWR);
	__ev3_led_fd[1] = open("/sys/class/leds/led0:red:brick-status/brightness", O_RDWR);
	__ev3_led_fd[2] = open("/sys/class/leds/led1:green:brick-status/brightness", O_RDWR);
	__ev3_led_fd[3] = open("/sys/class/leds/led1:red:brick-status/brightness", O_RDWR);
}
void ev3_set_led(enum ev3_led_name led, enum ev3_led_color color, int32_t value) {
	if (value < 0) value = 0;
	if (value > 255) value = 255;
	char buffer[16];
	sprintf(buffer, "%i", value);
	lseek(__ev3_led_fd[led + color], 0, SEEK_SET);
	int l = write(__ev3_led_fd[led + color], buffer, strlen(buffer));
}
/*
int32_t ev3_get_led(enum ev3_led_name led, enum ev3_led_color color) {
	char buffer[16];
	lseek(__ev3_led_fd[led + color], 0, SEEK_SET);
	buffer[read(__ev3_led_fd[led + color], buffer, 16)] = 0;
	return atoi(buffer);
}
*/
void ev3_quit_led() {
	int i;
	for (i = 0; i < 4; i++) close(__ev3_led_fd[i]);
}
uint32_t ev3c_current() {
	char buffer[32];
	ev3_read_file("/sys/class/power_supply/lego-ev3-battery/current_now", buffer, 32);
	return atoi(buffer);
}
uint32_t ev3c_voltage() {
	char buffer[32];
	ev3_read_file("/sys/class/power_supply/lego-ev3-battery/voltage_now", buffer, 32);
	return atoi(buffer);
}
